!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/platform"),require("@angular/common"),require("@angular/common/locales/en"),require("@angular/common/locales/zh"),require("@angular/common/locales/zh-Hant"),require("@angular/core"),require("@delon/theme"),require("@ngx-translate/core"),require("date-fns/locale"),require("ng-zorro-antd/i18n"),require("rxjs"),require("rxjs/operators"),require("@angular/common/http"),require("@angular/router"),require("@delon/auth"),require("ng-zorro-antd/notification"),require("ng-zorro-antd/modal"),require("@delon/acl"),require("ng-zorro-antd/icon"),require("@ant-design/icons-angular/icons")):"function"==typeof define&&define.amd?define("@fs/ng-alain/core",["exports","@angular/cdk/platform","@angular/common","@angular/common/locales/en","@angular/common/locales/zh","@angular/common/locales/zh-Hant","@angular/core","@delon/theme","@ngx-translate/core","date-fns/locale","ng-zorro-antd/i18n","rxjs","rxjs/operators","@angular/common/http","@angular/router","@delon/auth","ng-zorro-antd/notification","ng-zorro-antd/modal","@delon/acl","ng-zorro-antd/icon","@ant-design/icons-angular/icons"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).fs=e.fs||{},e.fs["ng-alain"]=e.fs["ng-alain"]||{},e.fs["ng-alain"].core={}),e.ng.cdk.platform,e.ng.common,e.ng.common.locales.en,e.ng.common.locales.zh,e.ng.common.locales.zhHant,e.ng.core,e.i1,e.i3,e.locale,e.i2,e.rxjs,e.rxjs.operators,e.ng.common.http,e.ng.router,e.auth,e.i1$1,e.i1$2,e.acl,e.icon,e.icons)}(this,(function(e,t,n,r,o,i,a,l,c,u,s,f,p,d,g,h,v,S,m,y,O){"use strict";function b(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var z=b(r),j=b(o),N=b(i);function I(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function C(e,t){return function(n,r){t(n,r,e)}}function L(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function w(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var T="zh-CN",D={"zh-CN":{text:"简体中文",ng:j.default,zorro:s.zh_CN,date:u.zhCN,delon:l.zh_CN,abbr:"🇨🇳"},"zh-TW":{text:"繁体中文",ng:N.default,zorro:s.zh_TW,date:u.zhTW,delon:l.zh_TW,abbr:"🇭🇰"},"en-US":{text:"English",ng:z.default,zorro:s.en_US,date:u.enUS,delon:l.en_US,abbr:"🇬🇧"}};e.I18NService=function(){function e(e,t,n,r,o){this.settings=e,this.nzI18nService=t,this.delonLocaleService=n,this.translate=r,this.platform=o,this._default=T,this.change$=new f.BehaviorSubject(null),this._langs=Object.keys(D).map((function(e){var t=D[e];return{code:e,text:t.text,abbr:t.abbr}}));var i=this._langs.map((function(e){return e.code}));r.addLangs(i);var a=this.getDefaultLang();i.includes(a)&&(this._default=a),this.updateLangData(this._default)}return e.prototype.getDefaultLang=function(){return this.platform.isBrowser?this.settings.layout.lang?this.settings.layout.lang:(navigator.languages?navigator.languages[0]:null)||navigator.language:T},e.prototype.updateLangData=function(e){var t=D[e];n.registerLocaleData(t.ng),this.nzI18nService.setLocale(t.zorro),this.nzI18nService.setDateLocale(t.date),this.delonLocaleService.setLocale(t.delon)},Object.defineProperty(e.prototype,"change",{get:function(){return this.change$.asObservable().pipe(p.filter((function(e){return null!=e})))},enumerable:!0,configurable:!0}),e.prototype.use=function(e){var t=this;e=e||this.translate.getDefaultLang(),this.currentLang!==e&&(this.updateLangData(e),this.translate.use(e).subscribe((function(){return t.change$.next(e)})))},e.prototype.getLangs=function(){return this._langs},e.prototype.fanyi=function(e,t){return this.translate.instant(e,t)},Object.defineProperty(e.prototype,"defaultLang",{get:function(){return this._default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLang",{get:function(){return this.translate.currentLang||this.translate.getDefaultLang()||this._default},enumerable:!0,configurable:!0}),e}(),e.I18NService.ɵprov=a.ɵɵdefineInjectable({factory:function(){return new e.I18NService(a.ɵɵinject(l.SettingsService),a.ɵɵinject(s.NzI18nService),a.ɵɵinject(l.DelonLocaleService),a.ɵɵinject(c.TranslateService),a.ɵɵinject(t.Platform))},token:e.I18NService,providedIn:"root"}),e.I18NService=I([a.Injectable({providedIn:"root"}),L("design:paramtypes",[l.SettingsService,s.NzI18nService,l.DelonLocaleService,c.TranslateService,t.Platform])],e.I18NService);var k={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"};e.DefaultInterceptor=function(){function e(e){this.injector=e}return Object.defineProperty(e.prototype,"notification",{get:function(){return this.injector.get(v.NzNotificationService)},enumerable:!0,configurable:!0}),e.prototype.goTo=function(e){var t=this;setTimeout((function(){return t.injector.get(g.Router).navigateByUrl(e)}))},e.prototype.checkStatus=function(e){if(!(e.status>=200&&e.status<300||401===e.status)){var t=k[e.status]||e.statusText;this.notification.error("请求错误 "+e.status+": "+e.url,t)}},e.prototype.handleData=function(e){switch(e.status>0&&this.injector.get(l._HttpClient).end(),this.checkStatus(e),e.status){case 200:break;case 401:this.notification.error("未登录或登录已过期，请重新登录。",""),this.injector.get(h.DA_SERVICE_TOKEN).clear(),this.goTo("/passport/login");break;case 403:case 404:case 500:this.goTo("/exception/"+e.status);break;default:e instanceof d.HttpErrorResponse&&console.warn("未可知错误，大部分是由于后端不支持CORS或无效配置引起",e)}return e instanceof d.HttpErrorResponse?f.throwError(e):f.of(e)},e.prototype.intercept=function(e,t){var n=this,r=e.url;r.startsWith("https://")||r.startsWith("http://")||(r="./"+r);var o=e.clone({url:r});return t.handle(o).pipe(p.mergeMap((function(e){return e instanceof d.HttpResponseBase?n.handleData(e):f.of(e)})),p.catchError((function(e){return n.handleData(e)})))},e}(),e.DefaultInterceptor=I([a.Injectable(),L("design:paramtypes",[a.Injector])],e.DefaultInterceptor),e.MessagesService=function(){function e(e){this.modalSrv=e}return e.prototype.info=function(e,t){void 0===t&&(t="訊息"),this.modalSrv.info({nzTitle:t,nzContent:e})},e.prototype.success=function(e,t){void 0===t&&(t="成功訊息"),this.modalSrv.success({nzTitle:t,nzContent:e})},e.prototype.warn=function(e,t){void 0===t&&(t="警告訊息"),this.modalSrv.warning({nzTitle:t,nzContent:e})},e.prototype.error=function(e,t){void 0===t&&(t="錯誤訊息"),this.modalSrv.error({nzTitle:t,nzContent:e})},e.prototype.confirm=function(e,t,n){"string"==typeof t?this.modalSrv.confirm({nzTitle:t,nzContent:e,nzOnOk:function(){n&&n(!0)},nzOnCancel:function(){n&&n(!1)}}):this.modalSrv.confirm({nzTitle:"請確認",nzContent:e,nzOnOk:function(){t&&t(!0)},nzOnCancel:function(){t&&t(!1)}})},e}(),e.MessagesService.ɵprov=a.ɵɵdefineInjectable({factory:function(){return new e.MessagesService(a.ɵɵinject(S.NzModalService))},token:e.MessagesService,providedIn:"root"}),e.MessagesService=I([a.Injectable({providedIn:"root"}),L("design:paramtypes",[S.NzModalService])],e.MessagesService),e.NotifyService=function(){function e(e){this.notification=e}return e.prototype.showNotify=function(e,t,n){this.notification.create(e,t,n)},e.prototype.success=function(e,t){void 0===e&&(e=""),void 0===t&&(t="成功"),this.showNotify("success",t,e)},e.prototype.info=function(e,t){void 0===e&&(e=""),void 0===t&&(t="訊息"),this.showNotify("info",t,e)},e.prototype.warning=function(e,t){void 0===e&&(e=""),void 0===t&&(t="警告"),this.showNotify("warning",t,e)},e.prototype.error=function(e,t){void 0===e&&(e=""),void 0===t&&(t="錯誤"),this.showNotify("error",t,e)},e}(),e.NotifyService.ɵprov=a.ɵɵdefineInjectable({factory:function(){return new e.NotifyService(a.ɵɵinject(v.NzNotificationService))},token:e.NotifyService,providedIn:"root"}),e.NotifyService=I([a.Injectable({providedIn:"root"}),L("design:paramtypes",[v.NzNotificationService])],e.NotifyService);var x=[O.InfoOutline,O.BulbOutline,O.ProfileOutline,O.ExceptionOutline,O.LinkOutline],M=[O.AlipayCircleOutline,O.ApiOutline,O.AppstoreOutline,O.ArrowDownOutline,O.BookOutline,O.CloudOutline,O.CopyrightOutline,O.CustomerServiceOutline,O.DashboardOutline,O.DatabaseOutline,O.DingdingOutline,O.DislikeOutline,O.DownloadOutline,O.ForkOutline,O.FrownOutline,O.FullscreenExitOutline,O.FullscreenOutline,O.GithubOutline,O.GlobalOutline,O.HddOutline,O.LaptopOutline,O.LikeOutline,O.LockOutline,O.LogoutOutline,O.MailOutline,O.MenuFoldOutline,O.MenuUnfoldOutline,O.MessageOutline,O.PayCircleOutline,O.PieChartOutline,O.PrinterOutline,O.RocketOutline,O.ScanOutline,O.SettingOutline,O.ShareAltOutline,O.ShoppingCartOutline,O.SoundOutline,O.StarOutline,O.TaobaoCircleOutline,O.TaobaoOutline,O.TeamOutline,O.ToolOutline,O.TrophyOutline,O.UsbOutline,O.UserOutline,O.WeiboCircleOutline];function q(e,t){if(e)throw new Error(t+" has already been loaded. Import Core modules in the AppModule only.")}e.StartupService=function(){function e(e,t,n,r,o,i,a,l){this.menuService=t,this.translate=n,this.i18n=r,this.settingService=o,this.aclService=i,this.titleService=a,this.httpClient=l,e.addIcon.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w(arguments[t]));return e}(M,x))}return e.prototype.load=function(){var e=this;return new Promise((function(t){f.zip(e.httpClient.get("assets/tmp/i18n/"+e.i18n.defaultLang+".json"),e.httpClient.get("assets/tmp/app-data.json")).pipe(p.catchError((function(e){return console.warn("StartupService.load: Network request failed",e),t(null),[]}))).subscribe((function(t){var n=w(t,2),r=n[0],o=n[1];e.translate.setTranslation(e.i18n.defaultLang,r),e.translate.setDefaultLang(e.i18n.defaultLang);var i=o;e.settingService.setApp(i.app),e.aclService.setFull(!0),e.menuService.add(i.menu),e.titleService.default="",e.titleService.suffix=i.app.name}),(function(){}),(function(){t(null)}))}))},e}(),e.StartupService=I([a.Injectable(),C(3,a.Inject(l.ALAIN_I18N_TOKEN)),L("design:paramtypes",[y.NzIconService,l.MenuService,c.TranslateService,e.I18NService,l.SettingsService,m.ACLService,l.TitleService,d.HttpClient])],e.StartupService),e.CoreModule=function(e){q(e,"CoreModule")},e.CoreModule=I([a.NgModule({providers:[]}),C(0,a.Optional()),C(0,a.SkipSelf()),L("design:paramtypes",[e.CoreModule])],e.CoreModule),e.throwIfAlreadyLoaded=q,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=fs-ng-alain-core.umd.min.js.map