{"version":3,"file":"abp-ng.theme.shared-extensions.js","sources":["../../../packages/theme-shared/extensions/src/lib/adapters/date-time.adapter.ts","../../../packages/theme-shared/extensions/src/lib/adapters/date.adapter.ts","../../../packages/theme-shared/extensions/src/lib/adapters/time.adapter.ts","../../../packages/theme-shared/extensions/src/lib/models/props.ts","../../../packages/theme-shared/extensions/src/lib/models/form-props.ts","../../../packages/theme-shared/extensions/src/lib/utils/factory.util.ts","../../../packages/theme-shared/extensions/src/lib/components/date-time-picker/date-time-picker.component.ts","../../../packages/theme-shared/extensions/src/lib/components/extensible-form/extensible-form-prop.component.ts","../../../packages/theme-shared/extensions/src/lib/constants/extra-properties.ts","../../../packages/theme-shared/extensions/src/lib/models/actions.ts","../../../packages/theme-shared/extensions/src/lib/models/entity-actions.ts","../../../packages/theme-shared/extensions/src/lib/models/entity-props.ts","../../../packages/theme-shared/extensions/src/lib/models/toolbar-actions.ts","../../../packages/theme-shared/extensions/src/lib/services/extensions.service.ts","../../../packages/theme-shared/extensions/src/lib/tokens/extensions.token.ts","../../../packages/theme-shared/extensions/src/lib/components/extensible-form/extensible-form.component.ts","../../../packages/theme-shared/extensions/src/lib/components/extensible-table/extensible-table.component.ts","../../../packages/theme-shared/extensions/src/lib/components/abstract-actions/abstract-actions.component.ts","../../../packages/theme-shared/extensions/src/lib/components/grid-actions/grid-actions.component.ts","../../../packages/theme-shared/extensions/src/lib/components/page-toolbar/page-toolbar.component.ts","../../../packages/theme-shared/extensions/src/lib/directives/disabled.directive.ts","../../../packages/theme-shared/extensions/src/lib/directives/prop-data.directive.ts","../../../packages/theme-shared/extensions/src/lib/ui-extensions.module.ts","../../../packages/theme-shared/extensions/src/lib/utils/actions.util.ts","../../../packages/theme-shared/extensions/src/lib/utils/form-props.util.ts","../../../packages/theme-shared/extensions/src/lib/utils/props.util.ts","../../../packages/theme-shared/extensions/src/lib/utils/enum.util.ts","../../../packages/theme-shared/extensions/src/lib/utils/localization.util.ts","../../../packages/theme-shared/extensions/src/lib/utils/validation.util.ts","../../../packages/theme-shared/extensions/src/lib/utils/state.util.ts","../../../packages/theme-shared/extensions/src/abp-ng.theme.shared-extensions.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { NgbDateStruct, NgbTimeStruct } from '@ng-bootstrap/ng-bootstrap';\r\n\r\n@Injectable()\r\nexport class DateTimeAdapter {\r\n  value: NgbDateTimeStruct;\r\n\r\n  fromModel(value: string | Date): NgbDateTimeStruct | null {\r\n    if (!value) return null;\r\n\r\n    const date = new Date(value);\r\n\r\n    if (isNaN((date as unknown) as number)) return null;\r\n\r\n    this.value = {\r\n      year: date.getFullYear(),\r\n      month: date.getMonth() + 1,\r\n      day: date.getDate(),\r\n      hour: date.getHours(),\r\n      minute: date.getMinutes(),\r\n      second: date.getSeconds(),\r\n    };\r\n\r\n    return this.value;\r\n  }\r\n\r\n  toModel(value: NgbDateTimeStruct | null): string {\r\n    if (!value) return '';\r\n\r\n    const now = new Date();\r\n\r\n    value = {\r\n      year: now.getUTCFullYear(),\r\n      month: now.getMonth() + 1,\r\n      day: now.getDate(),\r\n      hour: 0,\r\n      minute: 0,\r\n      second: 0,\r\n      ...this.value,\r\n      ...value,\r\n    };\r\n\r\n    const date = new Date(\r\n      value.year,\r\n      value.month - 1,\r\n      value.day,\r\n      value.hour,\r\n      value.minute,\r\n      value.second,\r\n    );\r\n\r\n    return new Date(date).toISOString();\r\n  }\r\n}\r\n\r\ntype NgbDateTimeStruct = NgbDateStruct & NgbTimeStruct;\r\n","import { formatDate } from '@angular/common';\r\nimport { Injectable } from '@angular/core';\r\nimport { NgbDateAdapter, NgbDateStruct } from '@ng-bootstrap/ng-bootstrap';\r\n\r\n@Injectable()\r\nexport class DateAdapter extends NgbDateAdapter<string> {\r\n  fromModel(value: string | Date): NgbDateStruct | null {\r\n    if (!value) return null;\r\n\r\n    const date = new Date(value);\r\n\r\n    if (isNaN((date as unknown) as number)) return null;\r\n\r\n    return {\r\n      day: date.getDate(),\r\n      month: date.getMonth() + 1,\r\n      year: date.getFullYear(),\r\n    };\r\n  }\r\n\r\n  toModel(value: NgbDateStruct | null): string {\r\n    if (!value) return '';\r\n\r\n    const date = new Date(value.year, value.month - 1, value.day);\r\n    const formattedDate = formatDate(date, 'yyyy-MM-dd', 'en');\r\n\r\n    return formattedDate;\r\n  }\r\n}\r\n","import { formatDate } from '@angular/common';\r\nimport { Injectable } from '@angular/core';\r\nimport { NgbTimeAdapter, NgbTimeStruct } from '@ng-bootstrap/ng-bootstrap';\r\n\r\n@Injectable()\r\nexport class TimeAdapter extends NgbTimeAdapter<string> {\r\n  fromModel(value: string | Date): NgbTimeStruct | null {\r\n    if (!value) return null;\r\n\r\n    const date = isTimeStr(value)\r\n      ? new Date(0, 0, 1, ...value.split(':').map(Number))\r\n      : new Date(value);\r\n\r\n    if (isNaN((date as unknown) as number)) return null;\r\n\r\n    return {\r\n      hour: date.getHours(),\r\n      minute: date.getMinutes(),\r\n      second: date.getSeconds(),\r\n    };\r\n  }\r\n\r\n  toModel(value: NgbTimeStruct | null): string {\r\n    if (!value) return '';\r\n\r\n    const date = new Date(0, 0, 1, value.hour, value.minute, value.second);\r\n    const formattedDate = formatDate(date, 'HH:mm', 'en');\r\n\r\n    return formattedDate;\r\n  }\r\n}\r\n\r\nfunction isTimeStr(value: string | Date): value is string {\r\n  return /^((2[123])|[01][0-9])(\\:[0-5][0-9]){1,2}$/.test(String(value));\r\n}\r\n","/* tslint:disable:variable-name */\r\nimport { LinkedList } from '@abp/utils';\r\nimport { InjectFlags, InjectionToken, Type } from '@angular/core';\r\nimport { O } from 'ts-toolbelt';\r\nimport { ePropType } from '../enums/props.enum';\r\n\r\nexport abstract class PropList<R = any, A = Prop<R>> extends LinkedList<A> {}\r\n\r\nexport abstract class PropData<R = any> {\r\n  abstract getInjected: <T>(\r\n    token: Type<T> | InjectionToken<T>,\r\n    notFoundValue?: T,\r\n    flags?: InjectFlags,\r\n  ) => T;\r\n  index?: number;\r\n  abstract record: R;\r\n\r\n  get data(): ReadonlyPropData<R> {\r\n    return {\r\n      getInjected: this.getInjected,\r\n      index: this.index,\r\n      record: this.record,\r\n    };\r\n  }\r\n}\r\n\r\nexport type ReadonlyPropData<R = any> = O.Readonly<Omit<PropData<R>, 'data'>>;\r\n\r\nexport abstract class Prop<R = any> {\r\n  constructor(\r\n    public readonly type: ePropType,\r\n    public readonly name: string,\r\n    public readonly displayName: string,\r\n    public readonly permission: string,\r\n    public readonly visible: PropPredicate<R> = _ => true,\r\n    public readonly isExtra = false,\r\n  ) {\r\n    this.displayName = this.displayName || this.name;\r\n  }\r\n}\r\n\r\nexport type PropCallback<T, R = any> = (data?: Omit<PropData<T>, 'data'>) => R;\r\nexport type PropPredicate<T> = (data?: Omit<PropData<T>, 'data'>) => boolean;\r\n\r\nexport abstract class PropsFactory<C extends Props<any>> {\r\n  protected abstract _ctor: Type<C>;\r\n  private contributorCallbacks: PropContributorCallbacks<InferredPropList<C>> = {};\r\n\r\n  get(name: string): C {\r\n    this.contributorCallbacks[name] = this.contributorCallbacks[name] || [];\r\n\r\n    return new this._ctor(this.contributorCallbacks[name]);\r\n  }\r\n}\r\n\r\nexport abstract class Props<L extends PropList> {\r\n  protected abstract _ctor: Type<L>;\r\n\r\n  get props(): L {\r\n    const propList = new this._ctor();\r\n\r\n    this.callbackList.forEach(callback => callback(propList));\r\n\r\n    return propList;\r\n  }\r\n\r\n  constructor(private readonly callbackList: PropContributorCallback<L>[]) {}\r\n\r\n  addContributor(contributeCallback: PropContributorCallback<L>) {\r\n    this.callbackList.push(contributeCallback);\r\n  }\r\n\r\n  clearContributors() {\r\n    while (this.callbackList.length) this.callbackList.pop();\r\n  }\r\n}\r\n\r\nexport type PropContributorCallbacks<L extends PropList<any>> = Record<\r\n  string,\r\n  PropContributorCallback<L>[]\r\n>;\r\n\r\nexport type PropContributorCallback<L extends PropList<any>> = (propList: L) => any;\r\n\r\ntype InferredPropList<C> = C extends Props<infer L> ? L : never;\r\n","/* tslint:disable:variable-name */\r\nimport { ABP } from '@abp/ng.core';\r\nimport { Injector, Type } from '@angular/core';\r\nimport { AsyncValidatorFn, ValidatorFn } from '@angular/forms';\r\nimport { Observable } from 'rxjs';\r\nimport { O } from 'ts-toolbelt';\r\nimport {\r\n  Prop,\r\n  PropCallback,\r\n  PropContributorCallback,\r\n  PropContributorCallbacks,\r\n  PropData,\r\n  PropList,\r\n  PropPredicate,\r\n  Props,\r\n  PropsFactory,\r\n} from './props';\r\n\r\nexport class FormPropList<R = any> extends PropList<R, FormProp<R>> {}\r\n\r\nexport class FormProps<R = any> extends Props<FormPropList<R>> {\r\n  protected _ctor: Type<FormPropList<R>> = FormPropList;\r\n}\r\n\r\nexport class CreateFormPropsFactory<R = any> extends PropsFactory<FormProps<R>> {\r\n  protected _ctor: Type<FormProps<R>> = FormProps;\r\n}\r\n\r\nexport class EditFormPropsFactory<R = any> extends PropsFactory<FormProps<R>> {\r\n  protected _ctor: Type<FormProps<R>> = FormProps;\r\n}\r\n\r\nexport class FormProp<R = any> extends Prop<R> {\r\n  readonly validators: PropCallback<R, ValidatorFn[]>;\r\n  readonly asyncValidators: PropCallback<R, AsyncValidatorFn[]>;\r\n  readonly disabled: PropPredicate<R>;\r\n  readonly readonly: PropPredicate<R>;\r\n  readonly autocomplete: string;\r\n  readonly defaultValue: boolean | number | string | Date;\r\n  readonly options: PropCallback<R, Observable<ABP.Option<any>[]>> | undefined;\r\n  readonly id: string | undefined;\r\n\r\n  constructor(options: FormPropOptions<R>) {\r\n    super(\r\n      options.type,\r\n      options.name,\r\n      options.displayName,\r\n      options.permission,\r\n      options.visible,\r\n      options.isExtra,\r\n    );\r\n\r\n    this.asyncValidators = options.asyncValidators || (_ => []);\r\n    this.validators = options.validators || (_ => []);\r\n    this.disabled = options.disabled || (_ => false);\r\n    this.readonly = options.readonly || (_ => false);\r\n    this.autocomplete = options.autocomplete || 'off';\r\n    this.options = options.options;\r\n    this.id = options.id || options.name;\r\n    const defaultValue = options.defaultValue;\r\n    this.defaultValue = isFalsyValue(defaultValue) ? defaultValue : defaultValue || null;\r\n  }\r\n\r\n  static create<R = any>(options: FormPropOptions<R>) {\r\n    return new FormProp<R>(options);\r\n  }\r\n\r\n  static createMany<R = any>(arrayOfOptions: FormPropOptions<R>[]) {\r\n    return arrayOfOptions.map(FormProp.create);\r\n  }\r\n}\r\n\r\nexport class FormPropData<R = any> extends PropData<R> {\r\n  getInjected: PropData<R>['getInjected'];\r\n\r\n  constructor(injector: Injector, public readonly record: R) {\r\n    super();\r\n\r\n    // tslint:disable-next-line\r\n    this.getInjected = injector.get.bind(injector);\r\n  }\r\n}\r\n\r\nexport type FormPropOptions<R = any> = O.Optional<\r\n  O.Writable<FormProp<R>>,\r\n  | 'permission'\r\n  | 'visible'\r\n  | 'displayName'\r\n  | 'isExtra'\r\n  | 'validators'\r\n  | 'asyncValidators'\r\n  | 'disabled'\r\n  | 'readonly'\r\n  | 'autocomplete'\r\n  | 'defaultValue'\r\n  | 'options'\r\n  | 'id'\r\n>;\r\n\r\nexport type CreateFormPropDefaults<R = any> = Record<string, FormProp<R>[]>;\r\nexport type CreateFormPropContributorCallback<R = any> = PropContributorCallback<FormPropList<R>>;\r\nexport type CreateFormPropContributorCallbacks<R = any> = PropContributorCallbacks<FormPropList<R>>;\r\nexport type EditFormPropDefaults<R = any> = Record<string, FormProp<R>[]>;\r\nexport type EditFormPropContributorCallback<R = any> = PropContributorCallback<FormPropList<R>>;\r\nexport type EditFormPropContributorCallbacks<R = any> = PropContributorCallbacks<FormPropList<R>>;\r\n\r\nfunction isFalsyValue(defaultValue: FormProp['defaultValue']): boolean {\r\n  return [0, '', false].indexOf(defaultValue as any) > -1;\r\n}\r\n","export function selfFactory(dependency?: any) {\r\n  return dependency;\r\n}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Input,\r\n  Optional,\r\n  SkipSelf,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { ControlContainer } from '@angular/forms';\r\nimport {\r\n  NgbDateAdapter,\r\n  NgbInputDatepicker,\r\n  NgbTimeAdapter,\r\n  NgbTimepicker,\r\n} from '@ng-bootstrap/ng-bootstrap';\r\nimport { DateTimeAdapter } from '../../adapters/date-time.adapter';\r\nimport { FormProp } from '../../models/form-props';\r\nimport { selfFactory } from '../../utils/factory.util';\r\n\r\n@Component({\r\n  exportAs: 'abpDateTimePicker',\r\n  selector: 'abp-date-time-picker',\r\n  template: `\r\n    <input\r\n      [id]=\"prop.id\"\r\n      [formControlName]=\"prop.name\"\r\n      (ngModelChange)=\"setTime($event)\"\r\n      (click)=\"datepicker.open()\"\r\n      (keyup.space)=\"datepicker.open()\"\r\n      ngbDatepicker\r\n      #datepicker=\"ngbDatepicker\"\r\n      type=\"text\"\r\n      class=\"form-control\"\r\n    />\r\n    <ngb-timepicker\r\n      #timepicker\r\n      [formControlName]=\"prop.name\"\r\n      (ngModelChange)=\"setDate($event)\"\r\n    ></ngb-timepicker>\r\n  `,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  viewProviders: [\r\n    {\r\n      provide: ControlContainer,\r\n      useFactory: selfFactory,\r\n      deps: [[new Optional(), new SkipSelf(), ControlContainer]],\r\n    },\r\n    {\r\n      provide: NgbDateAdapter,\r\n      useClass: DateTimeAdapter,\r\n    },\r\n    {\r\n      provide: NgbTimeAdapter,\r\n      useClass: DateTimeAdapter,\r\n    },\r\n  ],\r\n})\r\nexport class DateTimePickerComponent {\r\n  @Input() prop: FormProp;\r\n\r\n  @ViewChild(NgbInputDatepicker) date: NgbInputDatepicker;\r\n  @ViewChild(NgbTimepicker) time: NgbTimepicker;\r\n\r\n  constructor(public readonly cdRef: ChangeDetectorRef) {}\r\n\r\n  setDate(datestr: string) {\r\n    this.date.writeValue(datestr);\r\n  }\r\n\r\n  setTime(datestr: string) {\r\n    this.time.writeValue(datestr);\r\n  }\r\n}\r\n","import { ABP, TrackByService } from '@abp/ng.core';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Input,\r\n  Optional,\r\n  SimpleChanges,\r\n  SkipSelf,\r\n  OnChanges,\r\n} from '@angular/core';\r\nimport { ControlContainer, Validators, ValidatorFn } from '@angular/forms';\r\nimport { NgbDateAdapter, NgbTimeAdapter } from '@ng-bootstrap/ng-bootstrap';\r\nimport { Observable, of } from 'rxjs';\r\nimport { DateAdapter } from '../../adapters/date.adapter';\r\nimport { TimeAdapter } from '../../adapters/time.adapter';\r\nimport { ePropType } from '../../enums/props.enum';\r\nimport { FormProp } from '../../models/form-props';\r\nimport { PropData } from '../../models/props';\r\nimport { selfFactory } from '../../utils/factory.util';\r\n\r\n@Component({\r\n  selector: 'abp-extensible-form-prop',\r\n  templateUrl: './extensible-form-prop.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  viewProviders: [\r\n    {\r\n      provide: ControlContainer,\r\n      useFactory: selfFactory,\r\n      deps: [[new Optional(), new SkipSelf(), ControlContainer]],\r\n    },\r\n    { provide: NgbDateAdapter, useClass: DateAdapter },\r\n    { provide: NgbTimeAdapter, useClass: TimeAdapter },\r\n  ],\r\n})\r\nexport class ExtensibleFormPropComponent implements OnChanges {\r\n  @Input() data: PropData;\r\n\r\n  @Input() prop: FormProp;\r\n\r\n  options$: Observable<ABP.Option<any>[]> = of([]);\r\n\r\n  validators: ValidatorFn[] = [];\r\n\r\n  readonly: boolean;\r\n\r\n  disabled: boolean;\r\n\r\n  constructor(public readonly cdRef: ChangeDetectorRef, public readonly track: TrackByService) {}\r\n\r\n  get asterisk(): string {\r\n    return this.validators.some(validator => validator === Validators.required) ? '*' : '';\r\n  }\r\n\r\n  getComponent(prop: FormProp): string {\r\n    if (prop.options) return 'select';\r\n\r\n    switch (prop.type) {\r\n      case ePropType.Boolean:\r\n        return 'checkbox';\r\n      case ePropType.Date:\r\n        return 'date';\r\n      case ePropType.DateTime:\r\n        return 'dateTime';\r\n      case ePropType.Text:\r\n        return 'textarea';\r\n      case ePropType.Time:\r\n        return 'time';\r\n      default:\r\n        return 'input';\r\n    }\r\n  }\r\n\r\n  getType(prop: FormProp): string {\r\n    switch (prop.type) {\r\n      case ePropType.Date:\r\n      case ePropType.String:\r\n        return 'text';\r\n      case ePropType.Boolean:\r\n        return 'checkbox';\r\n      case ePropType.Number:\r\n        return 'number';\r\n      case ePropType.Email:\r\n        return 'email';\r\n      case ePropType.Password:\r\n        return 'password';\r\n      default:\r\n        return 'hidden';\r\n    }\r\n  }\r\n\r\n  ngOnChanges({ prop }: SimpleChanges) {\r\n    const options = prop.currentValue.options;\r\n    const readonly = prop.currentValue.readonly;\r\n    const disabled = prop.currentValue.disabled;\r\n    const validators = prop.currentValue.validators;\r\n\r\n    if (options) this.options$ = options(this.data);\r\n    if (readonly) this.readonly = readonly(this.data);\r\n    if (disabled) this.disabled = disabled(this.data);\r\n    if (validators) this.validators = validators(this.data);\r\n  }\r\n}\r\n","export const EXTRA_PROPERTIES_KEY = 'extraProperties';\r\n","/* tslint:disable:variable-name */\r\nimport { LinkedList } from '@abp/utils';\r\nimport { InjectFlags, InjectionToken, Type } from '@angular/core';\r\nimport { O } from 'ts-toolbelt';\r\n\r\nexport abstract class ActionList<R = any, A = Action<R>> extends LinkedList<A> {}\r\n\r\nexport abstract class ActionData<R = any> {\r\n  abstract getInjected: <T>(\r\n    token: Type<T> | InjectionToken<T>,\r\n    notFoundValue?: T,\r\n    flags?: InjectFlags,\r\n  ) => T;\r\n  index?: number;\r\n  abstract record: R;\r\n\r\n  get data(): ReadonlyActionData<R> {\r\n    return {\r\n      getInjected: this.getInjected,\r\n      index: this.index,\r\n      record: this.record,\r\n    };\r\n  }\r\n}\r\n\r\nexport type ReadonlyActionData<R = any> = O.Readonly<Omit<ActionData<R>, 'data'>>;\r\n\r\nexport abstract class Action<R = any> {\r\n  constructor(\r\n    public readonly permission: string,\r\n    public readonly visible: ActionPredicate<R> = _ => true,\r\n    public readonly action: ActionCallback<R> = _ => {},\r\n  ) {}\r\n}\r\n\r\nexport type ActionCallback<T, R = any> = (data?: Omit<ActionData<T>, 'data'>) => R;\r\nexport type ActionPredicate<T> = (data?: Omit<ActionData<T>, 'data'>) => boolean;\r\n\r\nexport abstract class ActionsFactory<C extends Actions<any>> {\r\n  protected abstract _ctor: Type<C>;\r\n  private contributorCallbacks: ActionContributorCallbacks<InferredActionList<C>> = {};\r\n\r\n  get(name: string): C {\r\n    this.contributorCallbacks[name] = this.contributorCallbacks[name] || [];\r\n\r\n    return new this._ctor(this.contributorCallbacks[name]);\r\n  }\r\n}\r\n\r\nexport abstract class Actions<L extends ActionList> {\r\n  protected abstract _ctor: Type<L>;\r\n\r\n  get actions(): L {\r\n    const actionList = new this._ctor();\r\n\r\n    this.callbackList.forEach(callback => callback(actionList));\r\n\r\n    return actionList;\r\n  }\r\n\r\n  constructor(private readonly callbackList: ActionContributorCallback<L>[]) {}\r\n\r\n  addContributor(contributeCallback: ActionContributorCallback<L>) {\r\n    this.callbackList.push(contributeCallback);\r\n  }\r\n\r\n  clearContributors() {\r\n    while (this.callbackList.length) this.callbackList.pop();\r\n  }\r\n}\r\n\r\nexport type ActionContributorCallbacks<L extends ActionList<any>> = Record<\r\n  string,\r\n  ActionContributorCallback<L>[]\r\n>;\r\n\r\nexport type ActionContributorCallback<L extends ActionList<any>> = (actionList: L) => any;\r\n\r\ntype InferredActionList<C> = C extends Actions<infer L> ? L : never;\r\n","/* tslint:disable:variable-name */\r\nimport { Type } from '@angular/core';\r\nimport { O } from 'ts-toolbelt';\r\nimport {\r\n  Action,\r\n  ActionContributorCallback,\r\n  ActionContributorCallbacks,\r\n  ActionList,\r\n  Actions,\r\n  ActionsFactory,\r\n} from './actions';\r\n\r\nexport class EntityActionList<R = any> extends ActionList<R, EntityAction<R>> {}\r\n\r\nexport class EntityActions<R = any> extends Actions<EntityActionList<R>> {\r\n  protected _ctor: Type<EntityActionList<R>> = EntityActionList;\r\n}\r\n\r\nexport class EntityActionsFactory<R = any> extends ActionsFactory<EntityActions<R>> {\r\n  protected _ctor: Type<EntityActions<R>> = EntityActions;\r\n}\r\n\r\nexport class EntityAction<R = any> extends Action<R> {\r\n  readonly text: string;\r\n  readonly icon: string;\r\n\r\n  constructor(options: EntityActionOptions<R>) {\r\n    super(options.permission, options.visible, options.action);\r\n    this.text = options.text;\r\n    this.icon = options.icon || '';\r\n  }\r\n\r\n  static create<R = any>(options: EntityActionOptions<R>) {\r\n    return new EntityAction<R>(options);\r\n  }\r\n\r\n  static createMany<R = any>(arrayOfOptions: EntityActionOptions<R>[]) {\r\n    return arrayOfOptions.map(EntityAction.create);\r\n  }\r\n}\r\n\r\nexport type EntityActionOptions<R = any> = O.Optional<\r\n  O.Writable<EntityAction<R>>,\r\n  'permission' | 'visible' | 'icon'\r\n>;\r\n\r\nexport type EntityActionDefaults<R = any> = Record<string, EntityAction<R>[]>;\r\nexport type EntityActionContributorCallback<R = any> = ActionContributorCallback<\r\n  EntityActionList<R>\r\n>;\r\nexport type EntityActionContributorCallbacks<R = any> = ActionContributorCallbacks<\r\n  EntityActionList<R>\r\n>;\r\n","/* tslint:disable:variable-name */\r\nimport { Type } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { O } from 'ts-toolbelt';\r\nimport {\r\n  Prop,\r\n  PropCallback,\r\n  PropContributorCallback,\r\n  PropContributorCallbacks,\r\n  PropList,\r\n  Props,\r\n  PropsFactory,\r\n} from './props';\r\nimport { ActionCallback } from './actions';\r\n\r\nexport class EntityPropList<R = any> extends PropList<R, EntityProp<R>> {}\r\n\r\nexport class EntityProps<R = any> extends Props<EntityPropList<R>> {\r\n  protected _ctor: Type<EntityPropList<R>> = EntityPropList;\r\n}\r\n\r\nexport class EntityPropsFactory<R = any> extends PropsFactory<EntityProps<R>> {\r\n  protected _ctor: Type<EntityProps<R>> = EntityProps;\r\n}\r\n\r\nexport class EntityProp<R = any> extends Prop<R> {\r\n  readonly columnWidth: number | undefined;\r\n  readonly sortable: boolean;\r\n  readonly valueResolver: PropCallback<R, Observable<any>>;\r\n  readonly action: ActionCallback<R>;\r\n\r\n  constructor(options: EntityPropOptions<R>) {\r\n    super(\r\n      options.type,\r\n      options.name,\r\n      options.displayName,\r\n      options.permission,\r\n      options.visible,\r\n      options.isExtra,\r\n    );\r\n\r\n    this.columnWidth = options.columnWidth;\r\n    this.sortable = options.sortable || false;\r\n    this.valueResolver = options.valueResolver || (data => of(data.record[this.name]));\r\n    this.action = options.action;\r\n  }\r\n\r\n  static create<R = any>(options: EntityPropOptions<R>) {\r\n    return new EntityProp<R>(options);\r\n  }\r\n\r\n  static createMany<R = any>(arrayOfOptions: EntityPropOptions<R>[]) {\r\n    return arrayOfOptions.map(EntityProp.create);\r\n  }\r\n}\r\n\r\nexport type EntityPropOptions<R = any> = O.Optional<\r\n  O.Writable<EntityProp<R>>,\r\n  | 'permission'\r\n  | 'visible'\r\n  | 'displayName'\r\n  | 'isExtra'\r\n  | 'columnWidth'\r\n  | 'sortable'\r\n  | 'valueResolver'\r\n  | 'action'\r\n>;\r\n\r\nexport type EntityPropDefaults<R = any> = Record<string, EntityProp<R>[]>;\r\nexport type EntityPropContributorCallback<R = any> = PropContributorCallback<EntityPropList<R>>;\r\nexport type EntityPropContributorCallbacks<R = any> = PropContributorCallbacks<EntityPropList<R>>;\r\n","/* tslint:disable:variable-name */\r\nimport { Type } from '@angular/core';\r\nimport { O } from 'ts-toolbelt';\r\nimport {\r\n  Action,\r\n  ActionContributorCallback,\r\n  ActionContributorCallbacks,\r\n  ActionList,\r\n  Actions,\r\n  ActionsFactory,\r\n} from './actions';\r\n\r\nexport class ToolbarActionList<R = any> extends ActionList<\r\n  R,\r\n  ToolbarAction<R> | ToolbarComponent<R>\r\n> {}\r\n\r\nexport class ToolbarActions<R = any> extends Actions<ToolbarActionList<R>> {\r\n  protected _ctor: Type<ToolbarActionList<R>> = ToolbarActionList;\r\n}\r\n\r\nexport class ToolbarActionsFactory<R = any> extends ActionsFactory<ToolbarActions<R>> {\r\n  protected _ctor: Type<ToolbarActions<R>> = ToolbarActions;\r\n}\r\n\r\nexport class ToolbarAction<R = any> extends Action<R> {\r\n  readonly text: string;\r\n  readonly icon: string;\r\n\r\n  constructor(options: ToolbarActionOptions<R>) {\r\n    super(options.permission, options.visible, options.action);\r\n    this.text = options.text;\r\n    this.icon = options.icon || '';\r\n  }\r\n\r\n  static create<R = any>(options: ToolbarActionOptions<R>) {\r\n    return new ToolbarAction<R>(options);\r\n  }\r\n\r\n  static createMany<R = any>(arrayOfOptions: ToolbarActionOptions<R>[]) {\r\n    return arrayOfOptions.map(ToolbarAction.create);\r\n  }\r\n}\r\n\r\nexport class ToolbarComponent<R = any> extends Action<R> {\r\n  readonly component: Type<any>;\r\n\r\n  constructor(options: ToolbarComponentOptions<R>) {\r\n    super(options.permission, options.visible, options.action);\r\n    this.component = options.component;\r\n  }\r\n\r\n  static create<R = any>(options: ToolbarComponentOptions<R>) {\r\n    return new ToolbarComponent<R>(options);\r\n  }\r\n\r\n  static createMany<R = any>(arrayOfOptions: ToolbarComponentOptions<R>[]) {\r\n    return arrayOfOptions.map(ToolbarComponent.create);\r\n  }\r\n}\r\n\r\nexport type ToolbarActionOptions<R = any> = O.Optional<\r\n  O.Writable<ToolbarAction<R>>,\r\n  'permission' | 'visible' | 'icon'\r\n>;\r\n\r\nexport type ToolbarComponentOptions<R = any> = O.Optional<\r\n  O.Writable<ToolbarComponent<R>>,\r\n  'permission' | 'visible' | 'action'\r\n>;\r\n\r\nexport type ToolbarActionDefaults<R = any> = Record<string, ToolbarAction<R>[]>;\r\nexport type ToolbarActionContributorCallback<R = any> = ActionContributorCallback<\r\n  ToolbarActionList<R>\r\n>;\r\nexport type ToolbarActionContributorCallbacks<R = any> = ActionContributorCallbacks<\r\n  ToolbarActionList<R>\r\n>;\r\n","import { Injectable } from '@angular/core';\r\nimport { EntityActionsFactory } from '../models/entity-actions';\r\nimport { EntityPropsFactory } from '../models/entity-props';\r\nimport { CreateFormPropsFactory, EditFormPropsFactory } from '../models/form-props';\r\nimport { ToolbarActionsFactory } from '../models/toolbar-actions';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ExtensionsService<R = any> {\r\n  readonly entityActions = new EntityActionsFactory<R>();\r\n  readonly toolbarActions = new ToolbarActionsFactory<R[]>();\r\n  readonly entityProps = new EntityPropsFactory<R>();\r\n  readonly createFormProps = new CreateFormPropsFactory<R>();\r\n  readonly editFormProps = new EditFormPropsFactory<R>();\r\n}\r\n","import { InjectionToken } from '@angular/core';\r\nimport { ActionCallback, ReadonlyActionData as ActionData } from '../models/actions';\r\nimport { ExtensionsService } from '../services/extensions.service';\r\n\r\nexport const EXTENSIONS_IDENTIFIER = new InjectionToken<string>('EXTENSIONS_IDENTIFIER');\r\nexport type ActionKeys = Extract<'entityActions' | 'toolbarActions', keyof ExtensionsService>;\r\n\r\nexport const EXTENSIONS_ACTION_TYPE = new InjectionToken<ActionKeys>('EXTENSIONS_ACTION_TYPE');\r\n\r\nexport const EXTENSIONS_ACTION_DATA = new InjectionToken<ActionData>('EXTENSIONS_ACTION_DATA');\r\nexport const EXTENSIONS_ACTION_CALLBACK = new InjectionToken<ActionCallback<unknown>>(\r\n  'EXTENSIONS_ACTION_DATA',\r\n);\r\n","import { TrackByService } from '@abp/ng.core';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  Inject,\r\n  Input,\r\n  Optional,\r\n  QueryList,\r\n  SkipSelf,\r\n  ViewChildren,\r\n} from '@angular/core';\r\nimport { ControlContainer, FormGroup } from '@angular/forms';\r\nimport { EXTRA_PROPERTIES_KEY } from '../../constants/extra-properties';\r\nimport { FormPropList } from '../../models/form-props';\r\nimport { ExtensionsService } from '../../services/extensions.service';\r\nimport { EXTENSIONS_IDENTIFIER } from '../../tokens/extensions.token';\r\nimport { selfFactory } from '../../utils/factory.util';\r\nimport { ExtensibleFormPropComponent } from './extensible-form-prop.component';\r\n\r\n@Component({\r\n  exportAs: 'abpExtensibleForm',\r\n  selector: 'abp-extensible-form',\r\n  templateUrl: './extensible-form.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  viewProviders: [\r\n    {\r\n      provide: ControlContainer,\r\n      useFactory: selfFactory,\r\n      deps: [[new Optional(), new SkipSelf(), ControlContainer]],\r\n    },\r\n  ],\r\n})\r\nexport class ExtensibleFormComponent<R = any> {\r\n  @ViewChildren(ExtensibleFormPropComponent)\r\n  formProps: QueryList<ExtensibleFormPropComponent>;\r\n\r\n  @Input()\r\n  set selectedRecord(record: R) {\r\n    const type = !record || JSON.stringify(record) === '{}' ? 'create' : 'edit';\r\n    this.propList = this.extensions[`${type}FormProps`].get(this.identifier).props;\r\n    this.record = record;\r\n  }\r\n\r\n  extraPropertiesKey = EXTRA_PROPERTIES_KEY;\r\n  propList: FormPropList<R>;\r\n  record: R;\r\n\r\n  get form(): FormGroup {\r\n    return (this.container ? this.container.control : { controls: {} }) as FormGroup;\r\n  }\r\n\r\n  get extraProperties(): FormGroup {\r\n    return (this.form.controls.extraProperties || { controls: {} }) as FormGroup;\r\n  }\r\n\r\n  constructor(\r\n    public readonly cdRef: ChangeDetectorRef,\r\n    public readonly track: TrackByService,\r\n    private container: ControlContainer,\r\n    private extensions: ExtensionsService,\r\n    @Inject(EXTENSIONS_IDENTIFIER) private identifier: string,\r\n  ) {}\r\n}\r\n","import {\r\n  ListService,\r\n  ConfigStateService,\r\n  getShortDateFormat,\r\n  getShortDateShortTimeFormat,\r\n  getShortTimeFormat,\r\n} from '@abp/ng.core';\r\nimport { formatDate } from '@angular/common';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  Inject,\r\n  Injector,\r\n  Input,\r\n  LOCALE_ID,\r\n  TemplateRef,\r\n  TrackByFunction,\r\n  Type,\r\n  InjectionToken,\r\n  InjectFlags,\r\n  SimpleChanges,\r\n  OnChanges,\r\n} from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { ePropType } from '../../enums/props.enum';\r\nimport { EntityProp, EntityPropList } from '../../models/entity-props';\r\nimport { PropData } from '../../models/props';\r\nimport { ExtensionsService } from '../../services/extensions.service';\r\nimport { EXTENSIONS_IDENTIFIER } from '../../tokens/extensions.token';\r\nimport { EntityActionList } from '../../models/entity-actions';\r\nconst DEFAULT_ACTIONS_COLUMN_WIDTH = 150;\r\n\r\n@Component({\r\n  exportAs: 'abpExtensibleTable',\r\n  selector: 'abp-extensible-table',\r\n  templateUrl: './extensible-table.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ExtensibleTableComponent<R = any> implements OnChanges {\r\n  protected _actionsText: string;\r\n  @Input()\r\n  set actionsText(value: string) {\r\n    this._actionsText = value;\r\n  }\r\n  get actionsText(): string {\r\n    return this._actionsText ?? (this.actionList.length > 1 ? 'AbpUi::Actions' : '');\r\n  }\r\n\r\n  @Input() data: R[];\r\n  @Input() list: ListService;\r\n  @Input() recordsTotal: number;\r\n  @Input() set actionsColumnWidth(width: number) {\r\n    this.setColumnWidths(width ? Number(width) : undefined);\r\n  }\r\n  @Input() actionsTemplate: TemplateRef<any>;\r\n\r\n  getInjected: <T>(token: Type<T> | InjectionToken<T>, notFoundValue?: T, flags?: InjectFlags) => T;\r\n\r\n  readonly columnWidths: number[];\r\n\r\n  readonly propList: EntityPropList<R>;\r\n\r\n  readonly actionList: EntityActionList<R>;\r\n\r\n  readonly trackByFn: TrackByFunction<EntityProp<R>> = (_, item) => item.name;\r\n\r\n  constructor(\r\n    @Inject(LOCALE_ID) private locale: string,\r\n    private config: ConfigStateService,\r\n    injector: Injector,\r\n  ) {\r\n    // tslint:disable-next-line\r\n    this.getInjected = injector.get.bind(injector);\r\n    const extensions = injector.get(ExtensionsService);\r\n    const name = injector.get(EXTENSIONS_IDENTIFIER);\r\n    this.propList = extensions.entityProps.get(name).props;\r\n    this.actionList = (extensions['entityActions'].get(name)\r\n      .actions as unknown) as EntityActionList<R>;\r\n    this.setColumnWidths(DEFAULT_ACTIONS_COLUMN_WIDTH);\r\n  }\r\n\r\n  private setColumnWidths(actionsColumn: number) {\r\n    const widths = [actionsColumn];\r\n    this.propList.forEach(({ value: prop }) => {\r\n      widths.push(prop.columnWidth);\r\n    });\r\n    (this.columnWidths as any) = widths;\r\n  }\r\n\r\n  private getDate(value: Date, format: string) {\r\n    return value ? formatDate(value, format, this.locale) : '';\r\n  }\r\n\r\n  private getIcon(value: boolean) {\r\n    return value\r\n      ? '<div class=\"text-center text-success\"><i class=\"fa fa-check\"></i></div>'\r\n      : '<div class=\"text-center text-danger\"><i class=\"fa fa-times\"></i></div>';\r\n  }\r\n\r\n  getContent(prop: EntityProp<R>, data: PropData): Observable<string> {\r\n    return prop.valueResolver(data).pipe(\r\n      map(value => {\r\n        switch (prop.type) {\r\n          case ePropType.Boolean:\r\n            return this.getIcon(value);\r\n          case ePropType.Date:\r\n            return this.getDate(value, getShortDateFormat(this.config));\r\n          case ePropType.Time:\r\n            return this.getDate(value, getShortTimeFormat(this.config));\r\n          case ePropType.DateTime:\r\n            return this.getDate(value, getShortDateShortTimeFormat(this.config));\r\n          default:\r\n            return value;\r\n          // More types can be handled in the future\r\n        }\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnChanges({ data }: SimpleChanges) {\r\n    if (!data?.currentValue) return;\r\n\r\n    this.data = data.currentValue.map((record, index) => {\r\n      this.propList.forEach(prop => {\r\n        const propData = { getInjected: this.getInjected, record, index } as any;\r\n        record[`_${prop.value.name}`] = {\r\n          visible: prop.value.visible(propData),\r\n          value: this.getContent(prop.value, propData),\r\n        };\r\n      });\r\n\r\n      return record;\r\n    });\r\n  }\r\n}\r\n","import { Directive, Injector, Input } from '@angular/core';\r\nimport { ActionData, ActionList } from '../../models/actions';\r\nimport { ExtensionsService } from '../../services/extensions.service';\r\nimport { EXTENSIONS_ACTION_TYPE, EXTENSIONS_IDENTIFIER } from '../../tokens/extensions.token';\r\n\r\n// tslint:disable: directive-class-suffix\r\n// Fix for https://github.com/angular/angular/issues/23904\r\n// @dynamic\r\n@Directive()\r\nexport abstract class AbstractActionsComponent<L extends ActionList<any>> extends ActionData<\r\n  InferredRecord<L>\r\n> {\r\n  readonly actionList: L;\r\n\r\n  readonly getInjected: InferredData<L>['getInjected'];\r\n\r\n  @Input() readonly record: InferredData<L>['record'];\r\n\r\n  constructor(injector: Injector) {\r\n    super();\r\n\r\n    // tslint:disable-next-line\r\n    this.getInjected = injector.get.bind(injector);\r\n    const extensions = injector.get(ExtensionsService);\r\n    const name = injector.get(EXTENSIONS_IDENTIFIER);\r\n    const type = injector.get(EXTENSIONS_ACTION_TYPE);\r\n    this.actionList = (extensions[type].get(name).actions as unknown) as L;\r\n  }\r\n}\r\n\r\ntype InferredData<L> = ActionData<InferredRecord<L>>;\r\ntype InferredRecord<L> = L extends ActionList<infer R> ? R : never;\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  Injector,\r\n  Input,\r\n  TrackByFunction,\r\n} from '@angular/core';\r\nimport { EntityAction, EntityActionList } from '../../models/entity-actions';\r\nimport { EXTENSIONS_ACTION_TYPE } from '../../tokens/extensions.token';\r\nimport { AbstractActionsComponent } from '../abstract-actions/abstract-actions.component';\r\n\r\n@Component({\r\n  exportAs: 'abpGridActions',\r\n  selector: 'abp-grid-actions',\r\n  templateUrl: './grid-actions.component.html',\r\n  providers: [\r\n    {\r\n      provide: EXTENSIONS_ACTION_TYPE,\r\n      useValue: 'entityActions',\r\n    },\r\n  ],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class GridActionsComponent<R = any> extends AbstractActionsComponent<EntityActionList<R>> {\r\n  @Input() icon = 'fa fa-cog';\r\n\r\n  @Input() readonly index: number;\r\n\r\n  @Input() text = '';\r\n\r\n  readonly trackByFn: TrackByFunction<EntityAction<R>> = (_, item) => item.text;\r\n\r\n  constructor(injector: Injector) {\r\n    super(injector);\r\n  }\r\n}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  InjectFlags,\r\n  InjectionToken,\r\n  Injector,\r\n  TrackByFunction,\r\n  Type,\r\n} from '@angular/core';\r\nimport { ToolbarActionList, ToolbarComponent } from '../../models/toolbar-actions';\r\nimport {\r\n  EXTENSIONS_ACTION_CALLBACK,\r\n  EXTENSIONS_ACTION_DATA,\r\n  EXTENSIONS_ACTION_TYPE,\r\n} from '../../tokens/extensions.token';\r\nimport { AbstractActionsComponent } from '../abstract-actions/abstract-actions.component';\r\n\r\n@Component({\r\n  exportAs: 'abpPageToolbar',\r\n  selector: 'abp-page-toolbar',\r\n  templateUrl: './page-toolbar.component.html',\r\n  providers: [\r\n    {\r\n      provide: EXTENSIONS_ACTION_TYPE,\r\n      useValue: 'toolbarActions',\r\n    },\r\n  ],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class PageToolbarComponent<R = any> extends AbstractActionsComponent<ToolbarActionList<R>> {\r\n  readonly trackByFn: TrackByFunction<ToolbarComponent<R>> = (_, item) =>\r\n    item.action || item.component;\r\n\r\n  constructor(private readonly injector: Injector) {\r\n    super(injector);\r\n  }\r\n\r\n  createInjector(action: ToolbarComponent<R>): Injector {\r\n    const get = <T>(token: Type<T> | InjectionToken<T>, notFoundValue?: T, flags?: InjectFlags) => {\r\n      return token === EXTENSIONS_ACTION_DATA\r\n        ? this.data\r\n        : token === EXTENSIONS_ACTION_CALLBACK\r\n        ? (data = this.data) => action.action(data)\r\n        : this.getInjected.call(this.injector, token, notFoundValue, flags);\r\n    };\r\n\r\n    return { get };\r\n  }\r\n}\r\n","import { Directive, Host, Input, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { NgControl } from '@angular/forms';\r\n\r\n@Directive({\r\n  selector: '[abpDisabled]',\r\n})\r\nexport class DisabledDirective implements OnChanges {\r\n  @Input()\r\n  abpDisabled: boolean;\r\n\r\n  constructor(@Host() private ngControl: NgControl) {}\r\n\r\n  // Related issue: https://github.com/angular/angular/issues/35330\r\n  ngOnChanges({ abpDisabled }: SimpleChanges) {\r\n    if (this.ngControl.control && abpDisabled) {\r\n      this.ngControl.control[abpDisabled.currentValue ? 'disable' : 'enable']();\r\n    }\r\n  }\r\n}\r\n","import {\r\n  Directive,\r\n  Injector,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  TemplateRef,\r\n  ViewContainerRef,\r\n} from '@angular/core';\r\nimport { PropData, PropList } from '../models/props';\r\n\r\n@Directive({\r\n  exportAs: 'abpPropData',\r\n  selector: '[abpPropData]',\r\n})\r\nexport class PropDataDirective<L extends PropList<any>> extends PropData<InferredData<L>>\r\n  implements OnChanges, OnDestroy {\r\n  /* tslint:disable:no-input-rename */\r\n  @Input('abpPropDataFromList') readonly propList: L;\r\n\r\n  @Input('abpPropDataWithRecord') readonly record: InferredData<L>['record'];\r\n\r\n  @Input('abpPropDataAtIndex') readonly index: number;\r\n  /* tslint:enable:no-input-rename */\r\n\r\n  readonly getInjected: InferredData<L>['getInjected'];\r\n\r\n  constructor(\r\n    private tempRef: TemplateRef<any>,\r\n    private vcRef: ViewContainerRef,\r\n    injector: Injector,\r\n  ) {\r\n    super();\r\n\r\n    // tslint:disable-next-line\r\n    this.getInjected = injector.get.bind(injector);\r\n  }\r\n\r\n  ngOnChanges() {\r\n    this.vcRef.clear();\r\n\r\n    this.vcRef.createEmbeddedView(this.tempRef, {\r\n      $implicit: this.data,\r\n      index: 0,\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.vcRef.clear();\r\n  }\r\n}\r\n\r\ntype InferredData<L> = PropData<InferredRecord<L>>;\r\ntype InferredRecord<L> = L extends PropList<infer R> ? R : never;\r\n","import { CoreModule } from '@abp/ng.core';\r\nimport { ThemeSharedModule } from '@abp/ng.theme.shared';\r\nimport { NgModule } from '@angular/core';\r\nimport {\r\n  NgbDatepickerModule,\r\n  NgbDropdownModule,\r\n  NgbTimepickerModule,\r\n} from '@ng-bootstrap/ng-bootstrap';\r\nimport { NgxValidateCoreModule } from '@ngx-validate/core';\r\nimport { DateTimePickerComponent } from './components/date-time-picker/date-time-picker.component';\r\nimport { ExtensibleFormPropComponent } from './components/extensible-form/extensible-form-prop.component';\r\nimport { ExtensibleFormComponent } from './components/extensible-form/extensible-form.component';\r\nimport { ExtensibleTableComponent } from './components/extensible-table/extensible-table.component';\r\nimport { GridActionsComponent } from './components/grid-actions/grid-actions.component';\r\nimport { PageToolbarComponent } from './components/page-toolbar/page-toolbar.component';\r\nimport { DisabledDirective } from './directives/disabled.directive';\r\nimport { PropDataDirective } from './directives/prop-data.directive';\r\n\r\n@NgModule({\r\n  exports: [\r\n    DateTimePickerComponent,\r\n    PageToolbarComponent,\r\n    GridActionsComponent,\r\n    ExtensibleFormComponent,\r\n    ExtensibleTableComponent,\r\n    PropDataDirective,\r\n    DisabledDirective,\r\n  ],\r\n  declarations: [\r\n    DateTimePickerComponent,\r\n    PageToolbarComponent,\r\n    GridActionsComponent,\r\n    ExtensibleFormPropComponent,\r\n    ExtensibleFormComponent,\r\n    ExtensibleTableComponent,\r\n    PropDataDirective,\r\n    DisabledDirective,\r\n  ],\r\n  imports: [\r\n    CoreModule,\r\n    ThemeSharedModule,\r\n    NgxValidateCoreModule,\r\n    NgbDatepickerModule,\r\n    NgbDropdownModule,\r\n    NgbTimepickerModule,\r\n  ],\r\n})\r\nexport class UiExtensionsModule {}\r\n","import { ActionContributorCallback, ActionList, ActionsFactory } from '../models/actions';\r\nimport {\r\n  EntityActionContributorCallbacks,\r\n  EntityActionDefaults,\r\n  EntityActions,\r\n  EntityActionsFactory,\r\n} from '../models/entity-actions';\r\nimport {\r\n  ToolbarActionContributorCallbacks,\r\n  ToolbarActionDefaults,\r\n  ToolbarActions,\r\n  ToolbarActionsFactory,\r\n} from '../models/toolbar-actions';\r\n\r\nexport function mergeWithDefaultActions<F extends ActionsFactory<any>>(\r\n  extension: F,\r\n  defaultActions: InferredActionDefaults<F>,\r\n  ...contributors: InferredActionContributorCallbacks<F>[]\r\n) {\r\n  Object.keys(defaultActions).forEach((name: string) => {\r\n    const actions: InferredActions<F> = extension.get(name);\r\n    actions.clearContributors();\r\n    actions.addContributor((actionList: ActionList) =>\r\n      actionList.addManyTail(defaultActions[name]),\r\n    );\r\n    contributors.forEach(contributor =>\r\n      (contributor[name] || []).forEach((callback: ActionContributorCallback<any>) =>\r\n        actions.addContributor(callback),\r\n      ),\r\n    );\r\n  });\r\n}\r\ntype InferredActionDefaults<F> = F extends EntityActionsFactory<infer RE>\r\n  ? EntityActionDefaults<RE>\r\n  : F extends ToolbarActionsFactory<infer RT>\r\n  ? ToolbarActionDefaults<RT>\r\n  : never;\r\n\r\ntype InferredActionContributorCallbacks<F> = F extends EntityActionsFactory<infer RE>\r\n  ? EntityActionContributorCallbacks<RE>\r\n  : F extends ToolbarActionsFactory<infer RT>\r\n  ? ToolbarActionContributorCallbacks<RT>\r\n  : never;\r\n\r\ntype InferredActions<F> = F extends EntityActionsFactory<infer RE>\r\n  ? EntityActions<RE>\r\n  : F extends ToolbarActionsFactory<infer RT>\r\n  ? ToolbarActions<RT>\r\n  : never;\r\n","import { FormControl, FormGroup } from '@angular/forms';\r\nimport { DateTimeAdapter } from '../adapters/date-time.adapter';\r\nimport { DateAdapter } from '../adapters/date.adapter';\r\nimport { TimeAdapter } from '../adapters/time.adapter';\r\nimport { EXTRA_PROPERTIES_KEY } from '../constants/extra-properties';\r\nimport { ePropType } from '../enums/props.enum';\r\nimport { FormPropList } from '../models/form-props';\r\nimport { PropData } from '../models/props';\r\nimport { ExtensionsService } from '../services/extensions.service';\r\nimport { EXTENSIONS_IDENTIFIER } from '../tokens/extensions.token';\r\n\r\nexport function generateFormFromProps<R extends any>(data: PropData<R>) {\r\n  const extensions = data.getInjected(ExtensionsService);\r\n  const identifier = data.getInjected(EXTENSIONS_IDENTIFIER);\r\n\r\n  const form = new FormGroup({});\r\n  const extraForm = new FormGroup({});\r\n  form.addControl(EXTRA_PROPERTIES_KEY, extraForm);\r\n\r\n  const record = data.record || {};\r\n  const type = JSON.stringify(record) === '{}' ? 'create' : 'edit';\r\n  const props: FormPropList<R> = extensions[`${type}FormProps`].get(identifier).props;\r\n  const extraProperties = record[EXTRA_PROPERTIES_KEY] || {};\r\n\r\n  props.forEach(({ value: prop }) => {\r\n    const name = prop.name;\r\n    const isExtraProperty = prop.isExtra || name in extraProperties;\r\n    let value = isExtraProperty ? extraProperties[name] : name in record ? record[name] : undefined;\r\n\r\n    if (typeof value === 'undefined') value = prop.defaultValue;\r\n\r\n    if (value) {\r\n      let adapter: DateAdapter | TimeAdapter | DateTimeAdapter;\r\n      switch (prop.type) {\r\n        case ePropType.Date:\r\n          adapter = new DateAdapter();\r\n          value = adapter.toModel(adapter.fromModel(value));\r\n          break;\r\n        case ePropType.Time:\r\n          adapter = new TimeAdapter();\r\n          value = adapter.toModel(adapter.fromModel(value));\r\n          break;\r\n        case ePropType.DateTime:\r\n          adapter = new DateTimeAdapter();\r\n          value = adapter.toModel(adapter.fromModel(value) as any);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    const formControl = new FormControl(value, {\r\n      asyncValidators: prop.asyncValidators(data),\r\n      validators: prop.validators(data),\r\n    });\r\n\r\n    (isExtraProperty ? extraForm : form).addControl(name, formControl);\r\n  });\r\n\r\n  return form;\r\n}\r\n","import { of } from 'rxjs';\r\nimport { EXTRA_PROPERTIES_KEY } from '../constants/extra-properties';\r\nimport {\r\n  EntityPropContributorCallbacks,\r\n  EntityPropDefaults,\r\n  EntityProps,\r\n  EntityPropsFactory,\r\n} from '../models/entity-props';\r\nimport {\r\n  CreateFormPropContributorCallbacks,\r\n  CreateFormPropDefaults,\r\n  CreateFormPropsFactory,\r\n  EditFormPropContributorCallbacks,\r\n  EditFormPropDefaults,\r\n  EditFormPropsFactory,\r\n  FormProps,\r\n} from '../models/form-props';\r\nimport { PropContributorCallback, PropData, PropList, PropsFactory } from '../models/props';\r\n\r\nexport function createExtraPropertyValueResolver<T>(name: string) {\r\n  return (data?: PropData<T>) => of(data.record[EXTRA_PROPERTIES_KEY][name]);\r\n}\r\n\r\nexport function mergeWithDefaultProps<F extends PropsFactory<any>>(\r\n  extension: F,\r\n  defaultProps: InferredPropDefaults<F>,\r\n  ...contributors: InferredPropContributorCallbacks<F>[]\r\n) {\r\n  Object.keys(defaultProps).forEach((name: string) => {\r\n    const props: InferredProps<F> = extension.get(name);\r\n    props.clearContributors();\r\n    props.addContributor((propList: PropList) => propList.addManyTail(defaultProps[name]));\r\n    contributors.forEach(contributor =>\r\n      (contributor[name] || []).forEach((callback: PropContributorCallback<any>) =>\r\n        props.addContributor(callback),\r\n      ),\r\n    );\r\n  });\r\n}\r\ntype InferredPropDefaults<F> = F extends EntityPropsFactory<infer RE>\r\n  ? EntityPropDefaults<RE>\r\n  : F extends CreateFormPropsFactory<infer RCF>\r\n  ? CreateFormPropDefaults<RCF>\r\n  : F extends EditFormPropsFactory<infer REF>\r\n  ? EditFormPropDefaults<REF>\r\n  : never;\r\n\r\ntype InferredPropContributorCallbacks<F> = F extends EntityPropsFactory<infer RE>\r\n  ? EntityPropContributorCallbacks<RE>\r\n  : F extends CreateFormPropsFactory<infer RCF>\r\n  ? CreateFormPropContributorCallbacks<RCF>\r\n  : F extends EditFormPropsFactory<infer REF>\r\n  ? EditFormPropContributorCallbacks<REF>\r\n  : never;\r\n\r\ntype InferredProps<F> = F extends EntityPropsFactory<infer RE>\r\n  ? EntityProps<RE>\r\n  : F extends CreateFormPropsFactory<infer RCF>\r\n  ? FormProps<RCF>\r\n  : F extends EditFormPropsFactory<infer REF>\r\n  ? FormProps<REF>\r\n  : never;\r\n","import { ABP, LocalizationService } from '@abp/ng.core';\r\nimport { merge, Observable, of } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { EXTRA_PROPERTIES_KEY } from '../constants/extra-properties';\r\nimport { ObjectExtensions } from '../models/object-extensions';\r\nimport { PropCallback } from '../models/props';\r\n\r\nexport function createEnum(members: ObjectExtensions.EnumMember[]) {\r\n  const enumObject: any = {};\r\n\r\n  members.forEach(({ name, value }) => {\r\n    enumObject[(enumObject[name] = value)] = name;\r\n  });\r\n\r\n  return enumObject;\r\n}\r\n\r\nexport function createEnumValueResolver<T = any>(\r\n  enumType: string,\r\n  lookupEnum: ObjectExtensions.Enum,\r\n  propName: string,\r\n): PropCallback<T, Observable<string>> {\r\n  return data => {\r\n    const value = data.record[EXTRA_PROPERTIES_KEY][propName];\r\n    const key = lookupEnum.transformed[value];\r\n    const l10n = data.getInjected(LocalizationService);\r\n    const localizeEnum = createEnumLocalizer(l10n, enumType, lookupEnum);\r\n\r\n    return createLocalizationStream(l10n, localizeEnum(key));\r\n  };\r\n}\r\n\r\nexport function createEnumOptions<T = any>(\r\n  enumType: string,\r\n  lookupEnum: ObjectExtensions.Enum,\r\n): PropCallback<T, Observable<ABP.Option<any>[]>> {\r\n  return data => {\r\n    const l10n = data.getInjected(LocalizationService);\r\n    const localizeEnum = createEnumLocalizer(l10n, enumType, lookupEnum);\r\n\r\n    return createLocalizationStream(\r\n      l10n,\r\n      lookupEnum.fields.map(({ name, value }) => ({\r\n        key: localizeEnum(name),\r\n        value,\r\n      })),\r\n    );\r\n  };\r\n}\r\n\r\nfunction createLocalizationStream(l10n: LocalizationService, mapTarget: any) {\r\n  return merge(of(null), l10n.languageChange).pipe(map(() => mapTarget));\r\n}\r\n\r\nfunction createEnumLocalizer(\r\n  l10n: LocalizationService,\r\n  enumType: string,\r\n  lookupEnum: ObjectExtensions.Enum,\r\n): (key: string) => string {\r\n  const resource = lookupEnum.localizationResource;\r\n  const shortType = getShortEnumType(enumType);\r\n\r\n  return key =>\r\n    l10n.localizeWithFallbackSync(\r\n      [resource],\r\n      ['Enum:' + shortType + '.' + key, shortType + '.' + key, key],\r\n      key,\r\n    );\r\n}\r\n\r\nfunction getShortEnumType(enumType: string): string {\r\n  return enumType.split('.').pop();\r\n}\r\n","import { ApplicationConfiguration, createLocalizationPipeKeyGenerator } from '@abp/ng.core';\r\nimport { ObjectExtensions } from '../models/object-extensions';\r\n\r\nexport function createDisplayNameLocalizationPipeKeyGenerator(\r\n  localization: ApplicationConfiguration.Localization,\r\n) {\r\n  const generateLocalizationPipeKey = createLocalizationPipeKeyGenerator(localization);\r\n\r\n  return (displayName: ObjectExtensions.DisplayName, fallback: ObjectExtensions.DisplayName) => {\r\n    if (displayName && displayName.name)\r\n      return generateLocalizationPipeKey(\r\n        [displayName.resource],\r\n        [displayName.name],\r\n        displayName.name,\r\n      );\r\n\r\n    const key = generateLocalizationPipeKey(\r\n      [fallback.resource],\r\n      ['DisplayName:' + fallback.name],\r\n      undefined,\r\n    );\r\n\r\n    if (key) return key;\r\n\r\n    return generateLocalizationPipeKey([fallback.resource], [fallback.name], fallback.name);\r\n  };\r\n}\r\n","import { AbpValidators } from '@abp/ng.core';\r\nimport { ValidatorFn } from '@angular/forms';\r\nimport { ObjectExtensions } from '../models/object-extensions';\r\n\r\nexport function getValidatorsFromProperty(property: ObjectExtensions.Property): ValidatorFn[] {\r\n  const validators: ValidatorFn[] = [];\r\n\r\n  property.attributes.forEach(attr => {\r\n    if (attr.typeSimple in AbpValidators)\r\n      validators.push(AbpValidators[attr.typeSimple](attr.config));\r\n  });\r\n\r\n  return validators;\r\n}\r\n","import { ABP, ApplicationConfiguration } from '@abp/ng.core';\r\nimport { createSelector, Store } from '@ngxs/store';\r\nimport { Observable, pipe, zip } from 'rxjs';\r\nimport { filter, map, switchMap, take } from 'rxjs/operators';\r\nimport { ePropType } from '../enums/props.enum';\r\nimport { EntityProp, EntityPropList } from '../models/entity-props';\r\nimport { FormProp, FormPropList } from '../models/form-props';\r\nimport { ObjectExtensions } from '../models/object-extensions';\r\nimport { PropCallback } from '../models/props';\r\nimport { createEnum, createEnumOptions, createEnumValueResolver } from './enum.util';\r\nimport { createDisplayNameLocalizationPipeKeyGenerator } from './localization.util';\r\nimport { createExtraPropertyValueResolver } from './props.util';\r\nimport { getValidatorsFromProperty } from './validation.util';\r\n\r\nconst selectConfig = (state: any) => state.ConfigState;\r\n\r\nconst selectObjectExtensions = createSelector(\r\n  [selectConfig],\r\n  (config: ObjectExtensions.Config) => config.objectExtensions,\r\n);\r\n\r\nconst selectLocalization = createSelector(\r\n  [selectConfig],\r\n  (config: ApplicationConfiguration.Response) => config.localization,\r\n);\r\n\r\nconst selectEnums = createSelector(\r\n  [selectObjectExtensions, selectLocalization],\r\n  (extensions: ObjectExtensions.Item) =>\r\n    Object.keys(extensions.enums).reduce((acc, key) => {\r\n      const { fields, localizationResource } = extensions.enums[key];\r\n      acc[key] = {\r\n        fields,\r\n        localizationResource,\r\n        transformed: createEnum(fields),\r\n      };\r\n      return acc;\r\n    }, {} as ObjectExtensions.Enums),\r\n);\r\n\r\nconst createObjectExtensionEntitiesSelector = (moduleKey: ModuleKey) =>\r\n  createSelector([selectObjectExtensions], (extensions: ObjectExtensions.Item) => {\r\n    if (!extensions) return null;\r\n\r\n    return (extensions.modules[moduleKey] || ({} as ObjectExtensions.Module)).entities;\r\n  });\r\n\r\nexport function getObjectExtensionEntitiesFromStore(store: Store, moduleKey: ModuleKey) {\r\n  return store.select(createObjectExtensionEntitiesSelector(moduleKey)).pipe(\r\n    map(entities => (isUndefined(entities) ? {} : entities)),\r\n    filter<ObjectExtensions.Entities>(Boolean),\r\n    take(1),\r\n  );\r\n}\r\n\r\nexport function mapEntitiesToContributors<T = any>(store: Store, resource: string) {\r\n  return pipe(\r\n    switchMap(entities =>\r\n      zip(store.select(selectLocalization), store.select(selectEnums)).pipe(\r\n        map(([localization, enums]) => {\r\n          const generateDisplayName = createDisplayNameLocalizationPipeKeyGenerator(localization);\r\n\r\n          return Object.keys(entities).reduce(\r\n            (acc, key: keyof ObjectExtensions.Entities) => {\r\n              acc.prop[key] = [];\r\n              acc.createForm[key] = [];\r\n              acc.editForm[key] = [];\r\n\r\n              const entity: ObjectExtensions.Entity = entities[key];\r\n              if (!entity) return acc;\r\n\r\n              const properties = entity.properties;\r\n              if (!properties) return acc;\r\n\r\n              const mapPropertiesToContributors = createPropertiesToContributorsMapper<T>(\r\n                generateDisplayName,\r\n                resource,\r\n                enums,\r\n              );\r\n\r\n              return mapPropertiesToContributors(properties, acc, key);\r\n            },\r\n            {\r\n              prop: {},\r\n              createForm: {},\r\n              editForm: {},\r\n            } as ObjectExtensions.PropContributors,\r\n          );\r\n        }),\r\n      ),\r\n    ),\r\n    take(1),\r\n  );\r\n}\r\n\r\nfunction createPropertiesToContributorsMapper<T = any>(\r\n  generateDisplayName: DisplayNameGeneratorFn,\r\n  resource: string,\r\n  enums: Record<string, ObjectExtensions.Enum>,\r\n) {\r\n  return (\r\n    properties: Record<string, ObjectExtensions.Property>,\r\n    contributors: ObjectExtensions.PropContributors<T>,\r\n    key: string,\r\n  ) => {\r\n    const isExtra = true;\r\n\r\n    Object.keys(properties).forEach((name: string) => {\r\n      const property = properties[name];\r\n      const type = getTypeFromProperty(property);\r\n      const displayName = generateDisplayName(property.displayName, { name, resource });\r\n\r\n      if (property.ui.onTable.isVisible) {\r\n        const sortable = Boolean(property.ui.onTable.isSortable);\r\n        const columnWidth = type === ePropType.Boolean ? 150 : 250;\r\n        const valueResolver =\r\n          type === ePropType.Enum\r\n            ? createEnumValueResolver(property.type, enums[property.type], name)\r\n            : createExtraPropertyValueResolver<T>(name);\r\n\r\n        const entityProp = new EntityProp<T>({\r\n          type,\r\n          name,\r\n          displayName,\r\n          sortable,\r\n          columnWidth,\r\n          valueResolver,\r\n          isExtra,\r\n        });\r\n\r\n        const contributor = (propList: EntityPropList<T>) => propList.addTail(entityProp);\r\n        contributors.prop[key].push(contributor);\r\n      }\r\n\r\n      const isOnCreateForm = property.ui.onCreateForm.isVisible;\r\n      const isOnEditForm = property.ui.onEditForm.isVisible;\r\n\r\n      if (isOnCreateForm || isOnEditForm) {\r\n        const defaultValue = property.defaultValue;\r\n        const validators = () => getValidatorsFromProperty(property);\r\n        let options: PropCallback<any, Observable<ABP.Option<any>[]>>;\r\n        if (type === ePropType.Enum) options = createEnumOptions(name, enums[property.type]);\r\n\r\n        const formProp = new FormProp({\r\n          type,\r\n          name,\r\n          displayName,\r\n          options,\r\n          defaultValue,\r\n          validators,\r\n          isExtra,\r\n        });\r\n\r\n        const formContributor = (propList: FormPropList<T>) => propList.addTail(formProp);\r\n\r\n        if (isOnCreateForm) contributors.createForm[key].push(formContributor);\r\n        if (isOnEditForm) contributors.editForm[key].push(formContributor);\r\n      }\r\n    });\r\n\r\n    return contributors;\r\n  };\r\n}\r\n\r\nfunction getTypeFromProperty(property: ObjectExtensions.Property): ePropType {\r\n  return (property.typeSimple.replace(/\\?$/, '') as string) as ePropType;\r\n}\r\n\r\nfunction isUndefined(obj: any): obj is undefined {\r\n  return typeof obj === 'undefined';\r\n}\r\n\r\ntype DisplayNameGeneratorFn = ReturnType<typeof createDisplayNameLocalizationPipeKeyGenerator>;\r\ntype ModuleKey = keyof ObjectExtensions.Modules;\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {AbstractActionsComponent as ɵj} from './lib/components/abstract-actions/abstract-actions.component';\nexport {Action as ɵb,ActionData as ɵa,Actions as ɵd,ActionsFactory as ɵc} from './lib/models/actions';\nexport {Prop as ɵf,PropData as ɵe,Props as ɵh,PropsFactory as ɵg} from './lib/models/props';\nexport {selfFactory as ɵi} from './lib/utils/factory.util';"],"names":[],"mappings":"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"}