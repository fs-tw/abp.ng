!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@ng-bootstrap/ng-bootstrap"),require("@angular/forms"),require("@abp/ng.core"),require("rxjs"),require("@abp/utils"),require("rxjs/operators"),require("@abp/ng.theme.shared"),require("@ngx-validate/core"),require("@ngxs/store")):"function"==typeof define&&define.amd?define("@abp/ng.theme.shared/extensions",["exports","@angular/core","@angular/common","@ng-bootstrap/ng-bootstrap","@angular/forms","@abp/ng.core","rxjs","@abp/utils","rxjs/operators","@abp/ng.theme.shared","@ngx-validate/core","@ngxs/store"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).abp=t.abp||{},t.abp.ng=t.abp.ng||{},t.abp.ng.theme=t.abp.ng.theme||{},t.abp.ng.theme.shared=t.abp.ng.theme.shared||{},t.abp.ng.theme.shared.extensions={}),t.ng.core,t.ng.common,t.ngBootstrap,t.ng.forms,t.ng_core,t.rxjs,t.utils,t.rxjs.operators,t.abp.ng.theme.shared,t.core,t.store)}(this,(function(t,e,n,r,o,i,a,c,s,p,u,l){"use strict";var d=function(){function t(){}return t.prototype.fromModel=function(t){if(!t)return null;var e=new Date(t);return isNaN(e)?null:(this.value={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()},this.value)},t.prototype.toModel=function(t){if(!t)return"";var e=new Date;t=Object.assign(Object.assign({year:e.getUTCFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:0,minute:0,second:0},this.value),t);var n=new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second);return new Date(n).toISOString()},t}();d.decorators=[{type:e.Injectable}];
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function m(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}Object.create;function g(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function b(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(g(arguments[e]));return t}Object.create;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.fromModel=function(t){if(!t)return null;var e=new Date(t);return isNaN(e)?null:{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},e.prototype.toModel=function(t){if(!t)return"";var e=new Date(t.year,t.month-1,t.day);return n.formatDate(e,"yyyy-MM-dd","en")},e}(r.NgbDateAdapter);h.decorators=[{type:e.Injectable}];var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.fromModel=function(t){if(!t)return null;var e=function(t){return/^((2[123])|[01][0-9])(\:[0-5][0-9]){1,2}$/.test(String(t))}(t)?new(Date.bind.apply(Date,b([void 0,0,0,1],t.split(":").map(Number)))):new Date(t);return isNaN(e)?null:{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}},e.prototype.toModel=function(t){if(!t)return"";var e=new Date(0,0,1,t.hour,t.minute,t.second);return n.formatDate(e,"HH:mm","en")},e}(r.NgbTimeAdapter);function v(t){return t}y.decorators=[{type:e.Injectable}];var x=v,C=function(){function t(t){this.cdRef=t}return t.prototype.setDate=function(t){this.date.writeValue(t)},t.prototype.setTime=function(t){this.time.writeValue(t)},t}();C.decorators=[{type:e.Component,args:[{exportAs:"abpDateTimePicker",selector:"abp-date-time-picker",template:'\n    <input\n      [id]="prop.id"\n      [formControlName]="prop.name"\n      (ngModelChange)="setTime($event)"\n      (click)="datepicker.open()"\n      (keyup.space)="datepicker.open()"\n      ngbDatepicker\n      #datepicker="ngbDatepicker"\n      type="text"\n      class="form-control"\n    />\n    <ngb-timepicker\n      #timepicker\n      [formControlName]="prop.name"\n      (ngModelChange)="setDate($event)"\n    ></ngb-timepicker>\n  ',changeDetection:e.ChangeDetectionStrategy.OnPush,viewProviders:[{provide:o.ControlContainer,useFactory:x,deps:[[new e.Optional,new e.SkipSelf,o.ControlContainer]]},{provide:r.NgbDateAdapter,useClass:d},{provide:r.NgbTimeAdapter,useClass:d}]}]}],C.ctorParameters=function(){return[{type:e.ChangeDetectorRef}]},C.propDecorators={prop:[{type:e.Input}],date:[{type:e.ViewChild,args:[r.NgbInputDatepicker]}],time:[{type:e.ViewChild,args:[r.NgbTimepicker]}]};var k=v,I=function(){function t(t,e){this.cdRef=t,this.track=e,this.options$=a.of([]),this.validators=[]}return Object.defineProperty(t.prototype,"asterisk",{get:function(){return this.validators.some((function(t){return t===o.Validators.required}))?"*":""},enumerable:!1,configurable:!0}),t.prototype.getComponent=function(t){if(t.options)return"select";switch(t.type){case"boolean":return"checkbox";case"date":return"date";case"dateTime":return"dateTime";case"text":return"textarea";case"time":return"time";default:return"input"}},t.prototype.getType=function(t){switch(t.type){case"date":case"string":return"text";case"boolean":return"checkbox";case"number":return"number";case"email":return"email";case"password":return"password";default:return"hidden"}},t.prototype.ngOnChanges=function(t){var e=t.prop,n=e.currentValue.options,r=e.currentValue.readonly,o=e.currentValue.disabled,i=e.currentValue.validators;n&&(this.options$=n(this.data)),r&&(this.readonly=r(this.data)),o&&(this.disabled=o(this.data)),i&&(this.validators=i(this.data))},t}();I.decorators=[{type:e.Component,args:[{selector:"abp-extensible-form-prop",template:'<div class="form-group" [abpPermission]="prop.permission" [ngSwitch]="getComponent(prop)">\r\n  <ng-template ngSwitchCase="input">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <input\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      [autocomplete]="prop.autocomplete"\r\n      [type]="getType(prop)"\r\n      [abpDisabled]="disabled"\r\n      [readonly]="readonly"\r\n      class="form-control"\r\n    />\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="checkbox">\r\n    <div class="custom-checkbox custom-control" validationTarget>\r\n      <input\r\n        [id]="prop.id"\r\n        [formControlName]="prop.name"\r\n        [abpDisabled]="disabled"\r\n        type="checkbox"\r\n        class="custom-control-input"\r\n      />\r\n      <label [htmlFor]="prop.id" class="custom-control-label"\r\n        >{{ prop.displayName | abpLocalization }} {{ asterisk }}</label\r\n      >\r\n    </div>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="select">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <select\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      [abpDisabled]="disabled"\r\n      class="custom-select form-control"\r\n    >\r\n      <option\r\n        *ngFor="let option of options$ | async; trackBy: track.by(\'value\')"\r\n        [ngValue]="option.value"\r\n        >{{ option.key }}</option\r\n      >\r\n    </select>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="date">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <input\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      (click)="datepicker.open()"\r\n      (keyup.space)="datepicker.open()"\r\n      ngbDatepicker\r\n      #datepicker="ngbDatepicker"\r\n      type="text"\r\n      class="form-control"\r\n    />\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="time">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <ngb-timepicker [formControlName]="prop.name"></ngb-timepicker>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="dateTime">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <abp-date-time-picker [prop]="prop"></abp-date-time-picker>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="textarea">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <textarea\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      [abpDisabled]="disabled"\r\n      [readonly]="readonly"\r\n      class="form-control"\r\n    ></textarea>\r\n  </ng-template>\r\n</div>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush,viewProviders:[{provide:o.ControlContainer,useFactory:k,deps:[[new e.Optional,new e.SkipSelf,o.ControlContainer]]},{provide:r.NgbDateAdapter,useClass:h},{provide:r.NgbTimeAdapter,useClass:y}]}]}],I.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:i.TrackByService}]},I.propDecorators={data:[{type:e.Input}],prop:[{type:e.Input}]};var D="extraProperties",w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(c.LinkedList),T=function(){function t(){}return Object.defineProperty(t.prototype,"data",{get:function(){return{getInjected:this.getInjected,index:this.index,record:this.record}},enumerable:!1,configurable:!0}),t}(),P=function(t,e,n){void 0===e&&(e=function(t){return!0}),void 0===n&&(n=function(t){}),this.permission=t,this.visible=e,this.action=n},j=function(){function t(){this.contributorCallbacks={}}return t.prototype.get=function(t){return this.contributorCallbacks[t]=this.contributorCallbacks[t]||[],new this._ctor(this.contributorCallbacks[t])},t}(),N=function(){function t(t){this.callbackList=t}return Object.defineProperty(t.prototype,"actions",{get:function(){var t=new this._ctor;return this.callbackList.forEach((function(e){return e(t)})),t},enumerable:!1,configurable:!0}),t.prototype.addContributor=function(t){this.callbackList.push(t)},t.prototype.clearContributors=function(){for(;this.callbackList.length;)this.callbackList.pop()},t}(),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(w),S=function(t){function e(){var e=t.apply(this,b(arguments))||this;return e._ctor=E,e}return m(e,t),e}(N),O=function(t){function e(){var e=t.apply(this,b(arguments))||this;return e._ctor=S,e}return m(e,t),e}(j),F=function(t){function e(e){var n=t.call(this,e.permission,e.visible,e.action)||this;return n.text=e.text,n.icon=e.icon||"",n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(P),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(c.LinkedList),A=function(){function t(){}return Object.defineProperty(t.prototype,"data",{get:function(){return{getInjected:this.getInjected,index:this.index,record:this.record}},enumerable:!1,configurable:!0}),t}(),_=function(t,e,n,r,o,i){void 0===o&&(o=function(t){return!0}),void 0===i&&(i=!1),this.type=t,this.name=e,this.displayName=n,this.permission=r,this.visible=o,this.isExtra=i,this.displayName=this.displayName||this.name},M=function(){function t(){this.contributorCallbacks={}}return t.prototype.get=function(t){return this.contributorCallbacks[t]=this.contributorCallbacks[t]||[],new this._ctor(this.contributorCallbacks[t])},t}(),V=function(){function t(t){this.callbackList=t}return Object.defineProperty(t.prototype,"props",{get:function(){var t=new this._ctor;return this.callbackList.forEach((function(e){return e(t)})),t},enumerable:!1,configurable:!0}),t.prototype.addContributor=function(t){this.callbackList.push(t)},t.prototype.clearContributors=function(){for(;this.callbackList.length;)this.callbackList.pop()},t}(),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(L),z=function(t){function e(){var e=t.apply(this,b(arguments))||this;return e._ctor=R,e}return m(e,t),e}(V),W=function(t){function e(){var e=t.apply(this,b(arguments))||this;return e._ctor=z,e}return m(e,t),e}(M),B=function(t){function e(e){var n=t.call(this,e.type,e.name,e.displayName,e.permission,e.visible,e.isExtra)||this;return n.columnWidth=e.columnWidth,n.sortable=e.sortable||!1,n.valueResolver=e.valueResolver||function(t){return a.of(t.record[n.name])},n.action=e.action,n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(_),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(L),$=function(t){function e(){var e=t.apply(this,b(arguments))||this;return e._ctor=q,e}return m(e,t),e}(V),X=function(t){function e(){var e=t.apply(this,b(arguments))||this;return e._ctor=$,e}return m(e,t),e}(M),G=function(t){function e(){var e=t.apply(this,b(arguments))||this;return e._ctor=$,e}return m(e,t),e}(M),H=function(t){function e(e){var n=t.call(this,e.type,e.name,e.displayName,e.permission,e.visible,e.isExtra)||this;n.asyncValidators=e.asyncValidators||function(t){return[]},n.validators=e.validators||function(t){return[]},n.disabled=e.disabled||function(t){return!1},n.readonly=e.readonly||function(t){return!1},n.autocomplete=e.autocomplete||"off",n.options=e.options,n.id=e.id||e.name;var r=e.defaultValue;return n.defaultValue=function(t){return[0,"",!1].indexOf(t)>-1}(r)?r:r||null,n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(_),Y=function(t){function e(e,n){var r=t.call(this)||this;return r.record=n,r.getInjected=e.get.bind(e),r}return m(e,t),e}(A);var K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(w),U=function(t){function e(){var e=t.apply(this,b(arguments))||this;return e._ctor=K,e}return m(e,t),e}(N),J=function(t){function e(){var e=t.apply(this,b(arguments))||this;return e._ctor=U,e}return m(e,t),e}(j),Q=function(t){function e(e){var n=t.call(this,e.permission,e.visible,e.action)||this;return n.text=e.text,n.icon=e.icon||"",n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(P),Z=function(t){function e(e){var n=t.call(this,e.permission,e.visible,e.action)||this;return n.component=e.component,n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(P),tt=function(){this.entityActions=new O,this.toolbarActions=new J,this.entityProps=new W,this.createFormProps=new X,this.editFormProps=new G};tt.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new tt},token:tt,providedIn:"root"}),tt.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}];var et=new e.InjectionToken("EXTENSIONS_IDENTIFIER"),nt=new e.InjectionToken("EXTENSIONS_ACTION_TYPE"),rt=new e.InjectionToken("EXTENSIONS_ACTION_DATA"),ot=new e.InjectionToken("EXTENSIONS_ACTION_DATA"),it=v,at=function(){function t(t,e,n,r,o){this.cdRef=t,this.track=e,this.container=n,this.extensions=r,this.identifier=o,this.extraPropertiesKey=D}return Object.defineProperty(t.prototype,"selectedRecord",{set:function(t){var e=t&&"{}"!==JSON.stringify(t)?"edit":"create";this.propList=this.extensions[e+"FormProps"].get(this.identifier).props,this.record=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"form",{get:function(){return this.container?this.container.control:{controls:{}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"extraProperties",{get:function(){return this.form.controls.extraProperties||{controls:{}}},enumerable:!1,configurable:!0}),t}();at.decorators=[{type:e.Component,args:[{exportAs:"abpExtensibleForm",selector:"abp-extensible-form",template:'<ng-container *ngIf="form">\r\n  <ng-container *abpPropData="let data; fromList: propList; withRecord: record">\r\n    <ng-container *ngFor="let prop of propList; trackBy: track.by(\'name\')">\r\n      <ng-container *ngIf="prop.visible(data)">\r\n        <ng-container\r\n          [formGroupName]="extraPropertiesKey"\r\n          *ngIf="extraProperties.controls[prop.name]; else tempDefault"\r\n        >\r\n          <abp-extensible-form-prop [prop]="prop" [data]="data"></abp-extensible-form-prop>\r\n        </ng-container>\r\n\r\n        <ng-template #tempDefault>\r\n          <abp-extensible-form-prop\r\n            *ngIf="form.get(prop.name)"\r\n            [prop]="prop"\r\n            [data]="data"\r\n          ></abp-extensible-form-prop>\r\n        </ng-template>\r\n      </ng-container>\r\n    </ng-container>\r\n  </ng-container>\r\n</ng-container>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush,viewProviders:[{provide:o.ControlContainer,useFactory:it,deps:[[new e.Optional,new e.SkipSelf,o.ControlContainer]]}]}]}],at.ctorParameters=function(){return[{type:e.ChangeDetectorRef},{type:i.TrackByService},{type:o.ControlContainer},{type:tt},{type:String,decorators:[{type:e.Inject,args:[et]}]}]},at.propDecorators={formProps:[{type:e.ViewChildren,args:[I]}],selectedRecord:[{type:e.Input}]};var ct=function(){function t(t,e,n){this.locale=t,this.config=e,this.trackByFn=function(t,e){return e.name},this.getInjected=n.get.bind(n);var r=n.get(tt),o=n.get(et);this.propList=r.entityProps.get(o).props,this.actionList=r.entityActions.get(o).actions,this.setColumnWidths(150)}return Object.defineProperty(t.prototype,"actionsText",{get:function(){var t;return null!==(t=this._actionsText)&&void 0!==t?t:this.actionList.length>1?"AbpUi::Actions":""},set:function(t){this._actionsText=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"actionsColumnWidth",{set:function(t){this.setColumnWidths(t?Number(t):void 0)},enumerable:!1,configurable:!0}),t.prototype.setColumnWidths=function(t){var e=[t];this.propList.forEach((function(t){var n=t.value;e.push(n.columnWidth)})),this.columnWidths=e},t.prototype.getDate=function(t,e){return t?n.formatDate(t,e,this.locale):""},t.prototype.getIcon=function(t){return t?'<div class="text-center text-success"><i class="fa fa-check"></i></div>':'<div class="text-center text-danger"><i class="fa fa-times"></i></div>'},t.prototype.getContent=function(t,e){var n=this;return t.valueResolver(e).pipe(s.map((function(e){switch(t.type){case"boolean":return n.getIcon(e);case"date":return n.getDate(e,i.getShortDateFormat(n.config));case"time":return n.getDate(e,i.getShortTimeFormat(n.config));case"dateTime":return n.getDate(e,i.getShortDateShortTimeFormat(n.config));default:return e}})))},t.prototype.ngOnChanges=function(t){var e=this,n=t.data;(null==n?void 0:n.currentValue)&&(this.data=n.currentValue.map((function(t,n){return e.propList.forEach((function(r){var o={getInjected:e.getInjected,record:t,index:n};t["_"+r.value.name]={visible:r.value.visible(o),value:e.getContent(r.value,o)}})),t})))},t}();ct.decorators=[{type:e.Component,args:[{exportAs:"abpExtensibleTable",selector:"abp-extensible-table",template:'<ngx-datatable default [rows]="data" [count]="recordsTotal" [list]="list">\r\n  <ngx-datatable-column\r\n    *ngIf="actionsTemplate || actionList.length"\r\n    [name]="actionsText | abpLocalization"\r\n    [maxWidth]="columnWidths[0]"\r\n    [width]="columnWidths[0]"\r\n    [sortable]="false"\r\n  >\r\n    <ng-template let-row="row" let-i="rowIndex" ngx-datatable-cell-template>\r\n      <ng-container\r\n        *ngTemplateOutlet="actionsTemplate || gridActions; context: { $implicit: row, index: i }"\r\n      ></ng-container>\r\n      <ng-template #gridActions>\r\n        <abp-grid-actions\r\n          [index]="i"\r\n          [record]="row"\r\n          text="AbpUi::Actions"\r\n        ></abp-grid-actions>\r\n      </ng-template>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <ng-container *ngFor="let prop of propList; let i = index; trackBy: trackByFn">\r\n    <ngx-datatable-column\r\n      [width]="columnWidths[i + 1] || 200"\r\n      [name]="prop.displayName | abpLocalization"\r\n      [prop]="prop.name"\r\n      [sortable]="prop.sortable"\r\n    >\r\n      <ng-template let-row="row" let-i="index" ngx-datatable-cell-template>\r\n        <ng-container [abpPermission]="prop.permission">\r\n          <div\r\n            *ngIf="row[\'_\' + prop.name].visible"\r\n            [innerHTML]="row[\'_\' + prop.name].value | async"\r\n            (click)="prop.action && prop.action({ getInjected: getInjected, record: row, index: i })"\r\n            [class.pointer]="prop.action"\r\n          ></div>\r\n        </ng-container>\r\n      </ng-template>\r\n    </ngx-datatable-column>\r\n  </ng-container>\r\n</ngx-datatable>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush}]}],ct.ctorParameters=function(){return[{type:String,decorators:[{type:e.Inject,args:[e.LOCALE_ID]}]},{type:i.ConfigStateService},{type:e.Injector}]},ct.propDecorators={actionsText:[{type:e.Input}],data:[{type:e.Input}],list:[{type:e.Input}],recordsTotal:[{type:e.Input}],actionsColumnWidth:[{type:e.Input}],actionsTemplate:[{type:e.Input}]};var st=function(t){function e(e){var n=t.call(this)||this;n.getInjected=e.get.bind(e);var r=e.get(tt),o=e.get(et),i=e.get(nt);return n.actionList=r[i].get(o).actions,n}return m(e,t),e}(T);st.decorators=[{type:e.Directive}],st.ctorParameters=function(){return[{type:e.Injector}]},st.propDecorators={record:[{type:e.Input}]};var pt=function(t){function e(e){var n=t.call(this,e)||this;return n.icon="fa fa-cog",n.text="",n.trackByFn=function(t,e){return e.text},n}return m(e,t),e}(st);pt.decorators=[{type:e.Component,args:[{exportAs:"abpGridActions",selector:"abp-grid-actions",template:'<div *ngIf="actionList.length > 1" ngbDropdown container="body" class="d-inline-block">\r\n  <button\r\n    class="btn btn-primary btn-sm dropdown-toggle"\r\n    data-toggle="dropdown"\r\n    aria-haspopup="true"\r\n    ngbDropdownToggle\r\n  >\r\n    <i [ngClass]="icon" [class.mr-1]="icon"></i>{{ text | abpLocalization }}\r\n  </button>\r\n  <div ngbDropdownMenu>\r\n    <ng-container\r\n      *ngFor="let action of actionList; trackBy: trackByFn"\r\n      [ngTemplateOutlet]="btnItem"\r\n      [ngTemplateOutletContext]="{ $implicit: action }"\r\n    >\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<ng-container\r\n  *ngIf="actionList.length === 1"\r\n  [ngTemplateOutlet]="btnItem"\r\n  [ngTemplateOutletContext]="{ $implicit: actionList.get(0).value }"\r\n></ng-container>\r\n\r\n<ng-template #btnItem let-action>\r\n  <button\r\n    *ngIf="action.visible(data)"\r\n    ngbDropdownItem\r\n    [abpPermission]="action.permission"\r\n    (click)="action.action(data)"\r\n    type="button"\r\n    class="{{ actionList.length === 1 ? \'btn btn-primary\' : \'\' }}"\r\n    [class.text-center]="actionList.length === 1"\r\n  >\r\n    <i [ngClass]="action.icon" [class.mr-1]="action.icon"></i>\r\n    <span *ngIf="action.icon; else ellipsis">{{ action.text | abpLocalization }}</span>\r\n    <ng-template #ellipsis>\r\n      <div abpEllipsis>{{ action.text | abpLocalization }}</div>\r\n    </ng-template>\r\n  </button>\r\n</ng-template>\r\n',providers:[{provide:nt,useValue:"entityActions"}],changeDetection:e.ChangeDetectionStrategy.OnPush}]}],pt.ctorParameters=function(){return[{type:e.Injector}]},pt.propDecorators={icon:[{type:e.Input}],index:[{type:e.Input}],text:[{type:e.Input}]};var ut=function(t){function e(e){var n=t.call(this,e)||this;return n.injector=e,n.trackByFn=function(t,e){return e.action||e.component},n}return m(e,t),e.prototype.createInjector=function(t){var e=this;return{get:function(n,r,o){return n===rt?e.data:n===ot?function(n){return void 0===n&&(n=e.data),t.action(n)}:e.getInjected.call(e.injector,n,r,o)}}},e}(st);ut.decorators=[{type:e.Component,args:[{exportAs:"abpPageToolbar",selector:"abp-page-toolbar",template:'<div class="row justify-content-end mx-n1" id="AbpContentToolbar">\r\n  <div class="col-auto px-1 pt-2" *ngFor="let action of actionList; trackBy: trackByFn">\r\n    <ng-container *ngIf="action.visible(data)" [abpPermission]="action.permission">\r\n      <ng-container *ngIf="action.component as component; else button">\r\n        <ng-container\r\n          *ngComponentOutlet="component; injector: createInjector(action)"\r\n        ></ng-container>\r\n      </ng-container>\r\n\r\n      <ng-template #button>\r\n        <button (click)="action.action(data)" type="button" class="btn btn-primary btn-sm">\r\n          <i [ngClass]="action.icon" [class.mr-1]="action.icon"></i>\r\n          {{ action.text | abpLocalization }}\r\n        </button>\r\n      </ng-template>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n',providers:[{provide:nt,useValue:"toolbarActions"}],changeDetection:e.ChangeDetectionStrategy.OnPush}]}],ut.ctorParameters=function(){return[{type:e.Injector}]};var lt=function(){function t(t){this.ngControl=t}return t.prototype.ngOnChanges=function(t){var e=t.abpDisabled;this.ngControl.control&&e&&this.ngControl.control[e.currentValue?"disable":"enable"]()},t}();lt.decorators=[{type:e.Directive,args:[{selector:"[abpDisabled]"}]}],lt.ctorParameters=function(){return[{type:o.NgControl,decorators:[{type:e.Host}]}]},lt.propDecorators={abpDisabled:[{type:e.Input}]};var dt=function(t){function e(e,n,r){var o=t.call(this)||this;return o.tempRef=e,o.vcRef=n,o.getInjected=r.get.bind(r),o}return m(e,t),e.prototype.ngOnChanges=function(){this.vcRef.clear(),this.vcRef.createEmbeddedView(this.tempRef,{$implicit:this.data,index:0})},e.prototype.ngOnDestroy=function(){this.vcRef.clear()},e}(A);dt.decorators=[{type:e.Directive,args:[{exportAs:"abpPropData",selector:"[abpPropData]"}]}],dt.ctorParameters=function(){return[{type:e.TemplateRef},{type:e.ViewContainerRef},{type:e.Injector}]},dt.propDecorators={propList:[{type:e.Input,args:["abpPropDataFromList"]}],record:[{type:e.Input,args:["abpPropDataWithRecord"]}],index:[{type:e.Input,args:["abpPropDataAtIndex"]}]};var ft=Object.freeze({__proto__:null}),mt=function(){};function gt(t){return function(e){return a.of(e.record.extraProperties[t])}}function bt(t,e){return a.merge(a.of(null),t.languageChange).pipe(s.map((function(){return e})))}function ht(t,e,n){var r=n.localizationResource,o=function(t){return t.split(".").pop()}(e);return function(e){return t.localizeWithFallbackSync([r],["Enum:"+o+"."+e,o+"."+e,e],e)}}mt.decorators=[{type:e.NgModule,args:[{exports:[C,ut,pt,at,ct,dt,lt],declarations:[C,ut,pt,I,at,ct,dt,lt],imports:[i.CoreModule,p.ThemeSharedModule,u.NgxValidateCoreModule,r.NgbDatepickerModule,r.NgbDropdownModule,r.NgbTimepickerModule]}]}];var yt=function(t){return t.ConfigState},vt=function(t){return t.objectExtensions},xt=l.createSelector([yt],vt),Ct=function(t){return t.localization},kt=l.createSelector([yt],Ct),It=function(t){return Object.keys(t.enums).reduce((function(e,n){var r,o,i=t.enums[n],a=i.fields,c=i.localizationResource;return e[n]={fields:a,localizationResource:c,transformed:(r=a,o={},r.forEach((function(t){var e=t.name,n=t.value;o[o[e]=n]=e})),o)},e}),{})},Dt=l.createSelector([xt,kt],It),wt=function(t){return l.createSelector([xt],(function(e){return e?(e.modules[t]||{}).entities:null}))},Tt=wt;t.ActionList=w,t.CreateFormPropsFactory=X,t.DateAdapter=h,t.DateTimeAdapter=d,t.DateTimePickerComponent=C,t.DisabledDirective=lt,t.EXTENSIONS_ACTION_CALLBACK=ot,t.EXTENSIONS_ACTION_DATA=rt,t.EXTENSIONS_ACTION_TYPE=nt,t.EXTENSIONS_IDENTIFIER=et,t.EXTRA_PROPERTIES_KEY=D,t.EditFormPropsFactory=G,t.EntityAction=F,t.EntityActionList=E,t.EntityActions=S,t.EntityActionsFactory=O,t.EntityProp=B,t.EntityPropList=R,t.EntityProps=z,t.EntityPropsFactory=W,t.ExtensibleFormComponent=at,t.ExtensibleFormPropComponent=I,t.ExtensibleTableComponent=ct,t.ExtensionsService=tt,t.FormProp=H,t.FormPropData=Y,t.FormPropList=q,t.FormProps=$,t.GridActionsComponent=pt,t.ObjectExtensions=ft,t.PageToolbarComponent=ut,t.PropDataDirective=dt,t.PropList=L,t.TimeAdapter=y,t.ToolbarAction=Q,t.ToolbarActionList=K,t.ToolbarActions=U,t.ToolbarActionsFactory=J,t.ToolbarComponent=Z,t.UiExtensionsModule=mt,t.createExtraPropertyValueResolver=gt,t.generateFormFromProps=function(t){var e=t.getInjected(tt),n=t.getInjected(et),r=new o.FormGroup({}),i=new o.FormGroup({});r.addControl(D,i);var a=t.record||{},c=e[("{}"===JSON.stringify(a)?"create":"edit")+"FormProps"].get(n).props,s=a.extraProperties||{};return c.forEach((function(e){var n=e.value,c=n.name,p=n.isExtra||c in s,u=p?s[c]:c in a?a[c]:void 0;if(void 0===u&&(u=n.defaultValue),u){var l=void 0;switch(n.type){case"date":u=(l=new h).toModel(l.fromModel(u));break;case"time":u=(l=new y).toModel(l.fromModel(u));break;case"dateTime":u=(l=new d).toModel(l.fromModel(u))}}var f=new o.FormControl(u,{asyncValidators:n.asyncValidators(t),validators:n.validators(t)});(p?i:r).addControl(c,f)})),r},t.getObjectExtensionEntitiesFromStore=function(t,e){return t.select(wt(e)).pipe(s.map((function(t){return void 0===t?{}:t})),s.filter(Boolean),s.take(1))},t.mapEntitiesToContributors=function(t,e){return a.pipe(s.switchMap((function(n){return a.zip(t.select(kt),t.select(Dt)).pipe(s.map((function(t){var r=g(t,2),o=r[0],a=r[1],c=function(t){var e=i.createLocalizationPipeKeyGenerator(t);return function(t,n){return t&&t.name?e([t.resource],[t.name],t.name):e([n.resource],["DisplayName:"+n.name],void 0)||e([n.resource],[n.name],n.name)}}(o);return Object.keys(n).reduce((function(t,r){t.prop[r]=[],t.createForm[r]=[],t.editForm[r]=[];var o=n[r];if(!o)return t;var s=o.properties;return s?function(t,e,n){return function(r,o,a){var c=!0;return Object.keys(r).forEach((function(s){var p,u,l,d=r[s],f=function(t){return t.typeSimple.replace(/\?$/,"")}(d),m=t(d.displayName,{name:s,resource:e});if(d.ui.onTable.isVisible){var g=Boolean(d.ui.onTable.isSortable),b="boolean"===f?150:250,h="enum"===f?(p=d.type,u=n[d.type],l=s,function(t){var e=t.record.extraProperties[l],n=u.transformed[e],r=t.getInjected(i.LocalizationService);return bt(r,ht(r,p,u)(n))}):gt(s),y=new B({type:f,name:s,displayName:m,sortable:g,columnWidth:b,valueResolver:h,isExtra:c}),v=function(t){return t.addTail(y)};o.prop[a].push(v)}var x=d.ui.onCreateForm.isVisible,C=d.ui.onEditForm.isVisible;if(x||C){var k=d.defaultValue,I=function(){return function(t){var e=[];return t.attributes.forEach((function(t){t.typeSimple in i.AbpValidators&&e.push(i.AbpValidators[t.typeSimple](t.config))})),e}(d)},D=void 0;"enum"===f&&(D=function(t,e){return function(n){var r=n.getInjected(i.LocalizationService),o=ht(r,t,e);return bt(r,e.fields.map((function(t){var e=t.name,n=t.value;return{key:o(e),value:n}})))}}(s,n[d.type]));var w=new H({type:f,name:s,displayName:m,options:D,defaultValue:k,validators:I,isExtra:c}),T=function(t){return t.addTail(w)};x&&o.createForm[a].push(T),C&&o.editForm[a].push(T)}})),o}}(c,e,a)(s,t,r):t}),{prop:{},createForm:{},editForm:{}})})))})),s.take(1))},t.mergeWithDefaultActions=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];Object.keys(e).forEach((function(r){var o=t.get(r);o.clearContributors(),o.addContributor((function(t){return t.addManyTail(e[r])})),n.forEach((function(t){return(t[r]||[]).forEach((function(t){return o.addContributor(t)}))}))}))},t.mergeWithDefaultProps=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];Object.keys(e).forEach((function(r){var o=t.get(r);o.clearContributors(),o.addContributor((function(t){return t.addManyTail(e[r])})),n.forEach((function(t){return(t[r]||[]).forEach((function(t){return o.addContributor(t)}))}))}))},t.ɵ0=x,t.ɵ1=vt,t.ɵ2=Ct,t.ɵ3=It,t.ɵ4=Tt,t.ɵa=T,t.ɵb=P,t.ɵc=j,t.ɵd=N,t.ɵe=A,t.ɵf=_,t.ɵg=M,t.ɵh=V,t.ɵi=v,t.ɵj=st,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=abp-ng.theme.shared-extensions.umd.min.js.map