!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@ng-bootstrap/ng-bootstrap"),require("@angular/forms"),require("@abp/utils"),require("@abp/ng.core"),require("rxjs"),require("rxjs/operators"),require("@abp/ng.theme.shared"),require("@ngx-validate/core"),require("@ngxs/store")):"function"==typeof define&&define.amd?define("@abp/ng.theme.shared/extensions",["exports","@angular/core","@angular/common","@ng-bootstrap/ng-bootstrap","@angular/forms","@abp/utils","@abp/ng.core","rxjs","rxjs/operators","@abp/ng.theme.shared","@ngx-validate/core","@ngxs/store"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).abp=t.abp||{},t.abp.ng=t.abp.ng||{},t.abp.ng.theme=t.abp.ng.theme||{},t.abp.ng.theme.shared=t.abp.ng.theme.shared||{},t.abp.ng.theme.shared.extensions={}),t.ng.core,t.ng.common,t.ngBootstrap,t.ng.forms,t.utils,t.ng_core,t.rxjs,t.rxjs.operators,t.abp.ng.theme.shared,t.core,t.store)}(this,(function(t,e,n,r,o,i,a,c,p,s,l,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function m(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function f(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function b(t,e){return function(n,r){e(n,r,t)}}function g(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}t.DateTimeAdapter=function(){function t(){}return t.prototype.fromModel=function(t){if(!t)return null;var e=new Date(t);return isNaN(e)?null:(this.value={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()},this.value)},t.prototype.toModel=function(t){if(!t)return"";var e=new Date;t=Object.assign(Object.assign({year:e.getUTCFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:0,minute:0,second:0},this.value),t);var n=new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second);return new Date(n).toISOString()},t}(),t.DateTimeAdapter=f([e.Injectable()],t.DateTimeAdapter),t.DateAdapter=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.fromModel=function(t){if(!t)return null;var e=new Date(t);return isNaN(e)?null:{day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},e.prototype.toModel=function(t){if(!t)return"";var e=new Date(t.year,t.month-1,t.day);return n.formatDate(e,"yyyy-MM-dd","en")},e}(r.NgbDateAdapter),t.DateAdapter=f([e.Injectable()],t.DateAdapter),t.TimeAdapter=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.fromModel=function(t){if(!t)return null;var e=function(t){return/^((2[123])|[01][0-9])(\:[0-5][0-9]){1,2}$/.test(String(t))}(t)?new(Date.bind.apply(Date,y([void 0,0,0,1],t.split(":").map(Number)))):new Date(t);return isNaN(e)?null:{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}},e.prototype.toModel=function(t){if(!t)return"";var e=new Date(0,0,1,t.hour,t.minute,t.second);return n.formatDate(e,"HH:mm","en")},e}(r.NgbTimeAdapter),t.TimeAdapter=f([e.Injectable()],t.TimeAdapter);var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(i.LinkedList),C=function(){function t(){}return Object.defineProperty(t.prototype,"data",{get:function(){return{getInjected:this.getInjected,index:this.index,record:this.record}},enumerable:!0,configurable:!0}),t}(),x=function(t,e,n,r,o,i){void 0===o&&(o=function(t){return!0}),void 0===i&&(i=!1),this.type=t,this.name=e,this.displayName=n,this.permission=r,this.visible=o,this.isExtra=i,this.displayName=this.displayName||this.name},D=function(){function t(){this.contributorCallbacks={}}return t.prototype.get=function(t){return this.contributorCallbacks[t]=this.contributorCallbacks[t]||[],new this._ctor(this.contributorCallbacks[t])},t}(),T=function(){function t(t){this.callbackList=t}return Object.defineProperty(t.prototype,"props",{get:function(){var t=new this._ctor;return this.callbackList.forEach((function(e){return e(t)})),t},enumerable:!0,configurable:!0}),t.prototype.addContributor=function(t){this.callbackList.push(t)},t.prototype.clearContributors=function(){for(;this.callbackList.length;)this.callbackList.pop()},t}(),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(v),E=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=k,e}return m(e,t),e}(T),I=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=E,e}return m(e,t),e}(D),P=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=E,e}return m(e,t),e}(D),w=function(t){function e(e){var n=t.call(this,e.type,e.name,e.displayName,e.permission,e.visible,e.isExtra)||this;n.asyncValidators=e.asyncValidators||function(t){return[]},n.validators=e.validators||function(t){return[]},n.disabled=e.disabled||function(t){return!1},n.readonly=e.readonly||function(t){return!1},n.autocomplete=e.autocomplete||"off",n.options=e.options,n.id=e.id||e.name;var r=e.defaultValue;return n.defaultValue=function(t){return[0,"",!1].indexOf(t)>-1}(r)?r:r||null,n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(x),j=function(t){function e(e,n){var r=t.call(this)||this;return r.record=n,r.getInjected=e.get.bind(e),r}return m(e,t),e}(C);function S(t){return t}var N=S;t.DateTimePickerComponent=function(){function t(t){this.cdRef=t}return t.prototype.setDate=function(t){this.date.writeValue(t)},t.prototype.setTime=function(t){this.time.writeValue(t)},t}(),f([e.Input(),g("design:type",w)],t.DateTimePickerComponent.prototype,"prop",void 0),f([e.ViewChild(r.NgbInputDatepicker),g("design:type",r.NgbInputDatepicker)],t.DateTimePickerComponent.prototype,"date",void 0),f([e.ViewChild(r.NgbTimepicker),g("design:type",r.NgbTimepicker)],t.DateTimePickerComponent.prototype,"time",void 0),t.DateTimePickerComponent=f([e.Component({exportAs:"abpDateTimePicker",selector:"abp-date-time-picker",template:'\n    <input\n      [id]="prop.id"\n      [formControlName]="prop.name"\n      (ngModelChange)="setTime($event)"\n      (click)="datepicker.open()"\n      (keyup.space)="datepicker.open()"\n      ngbDatepicker\n      #datepicker="ngbDatepicker"\n      type="text"\n      class="form-control"\n    />\n    <ngb-timepicker\n      #timepicker\n      [formControlName]="prop.name"\n      (ngModelChange)="setDate($event)"\n    ></ngb-timepicker>\n  ',changeDetection:e.ChangeDetectionStrategy.OnPush,viewProviders:[{provide:o.ControlContainer,useFactory:N,deps:[[new e.Optional,new e.SkipSelf,o.ControlContainer]]},{provide:r.NgbDateAdapter,useClass:t.DateTimeAdapter},{provide:r.NgbTimeAdapter,useClass:t.DateTimeAdapter}]}),g("design:paramtypes",[e.ChangeDetectorRef])],t.DateTimePickerComponent);var A=S;t.ExtensibleFormPropComponent=function(){function t(t,e){this.cdRef=t,this.track=e,this.options$=c.of([]),this.validators=[]}return Object.defineProperty(t.prototype,"asterisk",{get:function(){return this.validators.some((function(t){return t===o.Validators.required}))?"*":""},enumerable:!0,configurable:!0}),t.prototype.getComponent=function(t){if(t.options)return"select";switch(t.type){case"boolean":return"checkbox";case"date":return"date";case"dateTime":return"dateTime";case"text":return"textarea";case"time":return"time";default:return"input"}},t.prototype.getType=function(t){switch(t.type){case"date":case"string":return"text";case"boolean":return"checkbox";case"number":return"number";case"email":return"email";case"password":return"password";default:return"hidden"}},t.prototype.ngOnChanges=function(t){var e=t.prop,n=e.currentValue.options,r=e.currentValue.readonly,o=e.currentValue.disabled,i=e.currentValue.validators;n&&(this.options$=n(this.data)),r&&(this.readonly=r(this.data)),o&&(this.disabled=o(this.data)),i&&(this.validators=i(this.data))},t}(),f([e.Input(),g("design:type",C)],t.ExtensibleFormPropComponent.prototype,"data",void 0),f([e.Input(),g("design:type",w)],t.ExtensibleFormPropComponent.prototype,"prop",void 0),t.ExtensibleFormPropComponent=f([e.Component({selector:"abp-extensible-form-prop",template:'<div class="form-group" [abpPermission]="prop.permission" [ngSwitch]="getComponent(prop)">\r\n  <ng-template ngSwitchCase="input">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <input\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      [autocomplete]="prop.autocomplete"\r\n      [type]="getType(prop)"\r\n      [abpDisabled]="disabled"\r\n      [readonly]="readonly"\r\n      class="form-control"\r\n    />\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="checkbox">\r\n    <div class="custom-checkbox custom-control" validationTarget>\r\n      <input\r\n        [id]="prop.id"\r\n        [formControlName]="prop.name"\r\n        [abpDisabled]="disabled"\r\n        type="checkbox"\r\n        class="custom-control-input"\r\n      />\r\n      <label [htmlFor]="prop.id" class="custom-control-label"\r\n        >{{ prop.displayName | abpLocalization }} {{ asterisk }}</label\r\n      >\r\n    </div>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="select">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <select\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      [abpDisabled]="disabled"\r\n      class="custom-select form-control"\r\n    >\r\n      <option\r\n        *ngFor="let option of options$ | async; trackBy: track.by(\'value\')"\r\n        [ngValue]="option.value"\r\n        >{{ option.key }}</option\r\n      >\r\n    </select>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="date">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <input\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      (click)="datepicker.open()"\r\n      (keyup.space)="datepicker.open()"\r\n      ngbDatepicker\r\n      #datepicker="ngbDatepicker"\r\n      type="text"\r\n      class="form-control"\r\n    />\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="time">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <ngb-timepicker [formControlName]="prop.name"></ngb-timepicker>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="dateTime">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <abp-date-time-picker [prop]="prop"></abp-date-time-picker>\r\n  </ng-template>\r\n\r\n  <ng-template ngSwitchCase="textarea">\r\n    <label [htmlFor]="prop.id">{{ prop.displayName | abpLocalization }} {{ asterisk }}</label>\r\n    <textarea\r\n      [id]="prop.id"\r\n      [formControlName]="prop.name"\r\n      [abpDisabled]="disabled"\r\n      [readonly]="readonly"\r\n      class="form-control"\r\n    ></textarea>\r\n  </ng-template>\r\n</div>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush,viewProviders:[{provide:o.ControlContainer,useFactory:A,deps:[[new e.Optional,new e.SkipSelf,o.ControlContainer]]},{provide:r.NgbDateAdapter,useClass:t.DateAdapter},{provide:r.NgbTimeAdapter,useClass:t.TimeAdapter}]}),g("design:paramtypes",[e.ChangeDetectorRef,a.TrackByService])],t.ExtensibleFormPropComponent);var F="extraProperties",O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(i.LinkedList),L=function(){function t(){}return Object.defineProperty(t.prototype,"data",{get:function(){return{getInjected:this.getInjected,index:this.index,record:this.record}},enumerable:!0,configurable:!0}),t}(),_=function(t,e,n){void 0===e&&(e=function(t){return!0}),void 0===n&&(n=function(t){}),this.permission=t,this.visible=e,this.action=n},M=function(){function t(){this.contributorCallbacks={}}return t.prototype.get=function(t){return this.contributorCallbacks[t]=this.contributorCallbacks[t]||[],new this._ctor(this.contributorCallbacks[t])},t}(),R=function(){function t(t){this.callbackList=t}return Object.defineProperty(t.prototype,"actions",{get:function(){var t=new this._ctor;return this.callbackList.forEach((function(e){return e(t)})),t},enumerable:!0,configurable:!0}),t.prototype.addContributor=function(t){this.callbackList.push(t)},t.prototype.clearContributors=function(){for(;this.callbackList.length;)this.callbackList.pop()},t}(),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(O),z=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=V,e}return m(e,t),e}(R),B=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=z,e}return m(e,t),e}(M),W=function(t){function e(e){var n=t.call(this,e.permission,e.visible,e.action)||this;return n.text=e.text,n.icon=e.icon||"",n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(_),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(v),q=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=G,e}return m(e,t),e}(T),$=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=q,e}return m(e,t),e}(D),X=function(t){function e(e){var n=t.call(this,e.type,e.name,e.displayName,e.permission,e.visible,e.isExtra)||this;return n.columnWidth=e.columnWidth,n.sortable=e.sortable||!1,n.valueResolver=e.valueResolver||function(t){return c.of(t.record[n.name])},n.action=e.action||function(t){},n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(x),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e}(O),Y=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=H,e}return m(e,t),e}(R),K=function(t){function e(){var e=t.apply(this,y(arguments))||this;return e._ctor=Y,e}return m(e,t),e}(M),U=function(t){function e(e){var n=t.call(this,e.permission,e.visible,e.action)||this;return n.text=e.text,n.icon=e.icon||"",n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(_),J=function(t){function e(e){var n=t.call(this,e.permission,e.visible,e.action)||this;return n.component=e.component,n}return m(e,t),e.create=function(t){return new e(t)},e.createMany=function(t){return t.map(e.create)},e}(_);t.ExtensionsService=function(){this.entityActions=new B,this.toolbarActions=new K,this.entityProps=new $,this.createFormProps=new I,this.editFormProps=new P},t.ExtensionsService.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new t.ExtensionsService},token:t.ExtensionsService,providedIn:"root"}),t.ExtensionsService=f([e.Injectable({providedIn:"root"})],t.ExtensionsService);var Q=new e.InjectionToken("EXTENSIONS_IDENTIFIER"),Z=new e.InjectionToken("EXTENSIONS_ACTION_TYPE"),tt=new e.InjectionToken("EXTENSIONS_ACTION_DATA"),et=new e.InjectionToken("EXTENSIONS_ACTION_DATA"),nt=S;t.ExtensibleFormComponent=function(){function t(t,e,n,r,o){this.cdRef=t,this.track=e,this.container=n,this.extensions=r,this.identifier=o,this.extraPropertiesKey=F}return Object.defineProperty(t.prototype,"selectedRecord",{set:function(t){var e=t&&"{}"!==JSON.stringify(t)?"edit":"create";this.propList=this.extensions[e+"FormProps"].get(this.identifier).props,this.record=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"form",{get:function(){return this.container?this.container.control:{controls:{}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraProperties",{get:function(){return this.form.controls.extraProperties||{controls:{}}},enumerable:!0,configurable:!0}),t}(),f([e.ViewChildren(t.ExtensibleFormPropComponent),g("design:type",e.QueryList)],t.ExtensibleFormComponent.prototype,"formProps",void 0),f([e.Input(),g("design:type",Object),g("design:paramtypes",[Object])],t.ExtensibleFormComponent.prototype,"selectedRecord",null),t.ExtensibleFormComponent=f([e.Component({exportAs:"abpExtensibleForm",selector:"abp-extensible-form",template:'<ng-container *ngIf="form">\r\n  <ng-container *abpPropData="let data; fromList: propList; withRecord: record">\r\n    <ng-container *ngFor="let prop of propList; trackBy: track.by(\'name\')">\r\n      <ng-container *ngIf="prop.visible(data)">\r\n        <ng-container\r\n          [formGroupName]="extraPropertiesKey"\r\n          *ngIf="extraProperties.controls[prop.name]; else tempDefault"\r\n        >\r\n          <abp-extensible-form-prop [prop]="prop" [data]="data"></abp-extensible-form-prop>\r\n        </ng-container>\r\n\r\n        <ng-template #tempDefault>\r\n          <abp-extensible-form-prop\r\n            *ngIf="form.get(prop.name)"\r\n            [prop]="prop"\r\n            [data]="data"\r\n          ></abp-extensible-form-prop>\r\n        </ng-template>\r\n      </ng-container>\r\n    </ng-container>\r\n  </ng-container>\r\n</ng-container>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush,viewProviders:[{provide:o.ControlContainer,useFactory:nt,deps:[[new e.Optional,new e.SkipSelf,o.ControlContainer]]}]}),b(4,e.Inject(Q)),g("design:paramtypes",[e.ChangeDetectorRef,a.TrackByService,o.ControlContainer,t.ExtensionsService,String])],t.ExtensibleFormComponent);t.ExtensibleTableComponent=function(){function e(e,n,r){this.locale=e,this.config=n,this.trackByFn=function(t,e){return e.name},this.getInjected=r.get.bind(r);var o=r.get(t.ExtensionsService),i=r.get(Q);this.propList=o.entityProps.get(i).props,this.actionList=o.entityActions.get(i).actions,this.setColumnWidths(150)}return Object.defineProperty(e.prototype,"actionsText",{get:function(){var t;return null!==(t=this._actionsText)&&void 0!==t?t:this.actionList.length>1?"AbpUi::Actions":""},set:function(t){this._actionsText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionsColumnWidth",{set:function(t){this.setColumnWidths(t?Number(t):void 0)},enumerable:!0,configurable:!0}),e.prototype.setColumnWidths=function(t){var e=[t];this.propList.forEach((function(t){var n=t.value;e.push(n.columnWidth)})),this.columnWidths=e},e.prototype.getDate=function(t,e){return t?n.formatDate(t,e,this.locale):""},e.prototype.getIcon=function(t){return t?'<div class="text-center text-success"><i class="fa fa-check"></i></div>':'<div class="text-center text-danger"><i class="fa fa-times"></i></div>'},e.prototype.getContent=function(t,e){var n=this;return t.valueResolver(e).pipe(p.map((function(e){switch(t.type){case"boolean":return n.getIcon(e);case"date":return n.getDate(e,a.getShortDateFormat(n.config));case"time":return n.getDate(e,a.getShortTimeFormat(n.config));case"dateTime":return n.getDate(e,a.getShortDateShortTimeFormat(n.config));default:return e}})))},e.prototype.ngOnChanges=function(t){var e=this,n=t.data;(null==n?void 0:n.currentValue)&&(this.data=n.currentValue.map((function(t,n){return e.propList.forEach((function(r){var o={getInjected:e.getInjected,record:t,index:n};t["_"+r.value.name]={visible:r.value.visible(o),value:e.getContent(r.value,o)}})),t})))},e}(),f([e.Input(),g("design:type",String),g("design:paramtypes",[String])],t.ExtensibleTableComponent.prototype,"actionsText",null),f([e.Input(),g("design:type",Array)],t.ExtensibleTableComponent.prototype,"data",void 0),f([e.Input(),g("design:type",a.ListService)],t.ExtensibleTableComponent.prototype,"list",void 0),f([e.Input(),g("design:type",Number)],t.ExtensibleTableComponent.prototype,"recordsTotal",void 0),f([e.Input(),g("design:type",Number),g("design:paramtypes",[Number])],t.ExtensibleTableComponent.prototype,"actionsColumnWidth",null),f([e.Input(),g("design:type",e.TemplateRef)],t.ExtensibleTableComponent.prototype,"actionsTemplate",void 0),t.ExtensibleTableComponent=f([e.Component({exportAs:"abpExtensibleTable",selector:"abp-extensible-table",template:'<ngx-datatable default [rows]="data" [count]="recordsTotal" [list]="list">\r\n  <ngx-datatable-column\r\n    *ngIf="actionsTemplate || actionList.length"\r\n    [name]="actionsText | abpLocalization"\r\n    [maxWidth]="columnWidths[0]"\r\n    [width]="columnWidths[0]"\r\n    [sortable]="false"\r\n  >\r\n    <ng-template let-row="row" let-i="rowIndex" ngx-datatable-cell-template>\r\n      <ng-container\r\n        *ngTemplateOutlet="actionsTemplate || gridActions; context: { $implicit: row, index: i }"\r\n      ></ng-container>\r\n      <ng-template #gridActions>\r\n        <abp-grid-actions\r\n          [index]="i"\r\n          [record]="row"\r\n          text="LanguageManagement::Actions"\r\n        ></abp-grid-actions>\r\n      </ng-template>\r\n    </ng-template>\r\n  </ngx-datatable-column>\r\n\r\n  <ng-container *ngFor="let prop of propList; let i = index; trackBy: trackByFn">\r\n    <ngx-datatable-column\r\n      [width]="columnWidths[i + 1] || 200"\r\n      [name]="prop.displayName | abpLocalization"\r\n      [prop]="prop.name"\r\n      [sortable]="prop.sortable"\r\n    >\r\n      <ng-template let-row="row" let-i="index" ngx-datatable-cell-template>\r\n        <ng-container [abpPermission]="prop.permission">\r\n          <div\r\n            *ngIf="row[\'_\' + prop.name].visible"\r\n            [innerHTML]="row[\'_\' + prop.name].value | async"\r\n            (click)="prop.action({ getInjected: getInjected, record: row, index: i })"\r\n          ></div>\r\n        </ng-container>\r\n      </ng-template>\r\n    </ngx-datatable-column>\r\n  </ng-container>\r\n</ngx-datatable>\r\n',changeDetection:e.ChangeDetectionStrategy.OnPush}),b(0,e.Inject(e.LOCALE_ID)),g("design:paramtypes",[String,a.ConfigStateService,e.Injector])],t.ExtensibleTableComponent),t.ɵj=function(e){function n(n){var r=e.call(this)||this;r.getInjected=n.get.bind(n);var o=n.get(t.ExtensionsService),i=n.get(Q),a=n.get(Z);return r.actionList=o[a].get(i).actions,r}return m(n,e),n}(L),f([e.Input(),g("design:type",Object)],t.ɵj.prototype,"record",void 0),t.ɵj=f([e.Directive(),g("design:paramtypes",[e.Injector])],t.ɵj),t.GridActionsComponent=function(t){function e(e){var n=t.call(this,e)||this;return n.icon="fa fa-cog",n.text="",n.trackByFn=function(t,e){return e.text},n}return m(e,t),e}(t.ɵj),f([e.Input(),g("design:type",Object)],t.GridActionsComponent.prototype,"icon",void 0),f([e.Input(),g("design:type",Number)],t.GridActionsComponent.prototype,"index",void 0),f([e.Input(),g("design:type",Object)],t.GridActionsComponent.prototype,"text",void 0),t.GridActionsComponent=f([e.Component({exportAs:"abpGridActions",selector:"abp-grid-actions",template:'<div *ngIf="actionList.length > 1" ngbDropdown container="body" class="d-inline-block">\r\n  <button\r\n    class="btn btn-primary btn-sm dropdown-toggle"\r\n    data-toggle="dropdown"\r\n    aria-haspopup="true"\r\n    ngbDropdownToggle\r\n  >\r\n    <i [ngClass]="icon" [class.mr-1]="icon"></i>{{ text | abpLocalization }}\r\n  </button>\r\n  <div ngbDropdownMenu>\r\n    <ng-container\r\n      *ngFor="let action of actionList; trackBy: trackByFn"\r\n      [ngTemplateOutlet]="btnItem"\r\n      [ngTemplateOutletContext]="{ $implicit: action }"\r\n    >\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<ng-container\r\n  *ngIf="actionList.length === 1"\r\n  [ngTemplateOutlet]="btnItem"\r\n  [ngTemplateOutletContext]="{ $implicit: actionList.get(0).value }"\r\n></ng-container>\r\n\r\n<ng-template #btnItem let-action>\r\n  <button\r\n    *ngIf="action.visible(data)"\r\n    ngbDropdownItem\r\n    [abpPermission]="action.permission"\r\n    (click)="action.action(data)"\r\n    type="button"\r\n    class="{{ actionList.length === 1 ? \'btn btn-primary\' : \'\' }}"\r\n    [class.text-center]="actionList.length === 1"\r\n  >\r\n    <i [ngClass]="action.icon" [class.mr-1]="action.icon"></i>\r\n    <span *ngIf="action.icon; else ellipsis">{{ action.text | abpLocalization }}</span>\r\n    <ng-template #ellipsis>\r\n      <div abpEllipsis>{{ action.text | abpLocalization }}</div>\r\n    </ng-template>\r\n  </button>\r\n</ng-template>\r\n',providers:[{provide:Z,useValue:"entityActions"}],changeDetection:e.ChangeDetectionStrategy.OnPush}),g("design:paramtypes",[e.Injector])],t.GridActionsComponent),t.PageToolbarComponent=function(t){function e(e){var n=t.call(this,e)||this;return n.injector=e,n.trackByFn=function(t,e){return e.action||e.component},n}return m(e,t),e.prototype.createInjector=function(t){var e=this;return{get:function(n,r,o){return n===tt?e.data:n===et?function(n){return void 0===n&&(n=e.data),t.action(n)}:e.getInjected.call(e.injector,n,r,o)}}},e}(t.ɵj),t.PageToolbarComponent=f([e.Component({exportAs:"abpPageToolbar",selector:"abp-page-toolbar",template:'<div class="row justify-content-end mx-n1" id="AbpContentToolbar">\r\n  <div class="col-auto px-1 pt-2" *ngFor="let action of actionList; trackBy: trackByFn">\r\n    <ng-container *ngIf="action.visible(data)" [abpPermission]="action.permission">\r\n      <ng-container *ngIf="action.component as component; else button">\r\n        <ng-container\r\n          *ngComponentOutlet="component; injector: createInjector(action)"\r\n        ></ng-container>\r\n      </ng-container>\r\n\r\n      <ng-template #button>\r\n        <button (click)="action.action(data)" type="button" class="btn btn-primary btn-sm">\r\n          <i [ngClass]="action.icon" [class.mr-1]="action.icon"></i>\r\n          {{ action.text | abpLocalization }}\r\n        </button>\r\n      </ng-template>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n',providers:[{provide:Z,useValue:"toolbarActions"}],changeDetection:e.ChangeDetectionStrategy.OnPush}),g("design:paramtypes",[e.Injector])],t.PageToolbarComponent),t.DisabledDirective=function(){function t(t){this.ngControl=t}return t.prototype.ngOnChanges=function(t){var e=t.abpDisabled;this.ngControl.control&&e&&this.ngControl.control[e.currentValue?"disable":"enable"]()},t}(),f([e.Input(),g("design:type",Boolean)],t.DisabledDirective.prototype,"abpDisabled",void 0),t.DisabledDirective=f([e.Directive({selector:"[abpDisabled]"}),b(0,e.Host()),g("design:paramtypes",[o.NgControl])],t.DisabledDirective),t.PropDataDirective=function(t){function e(e,n,r){var o=t.call(this)||this;return o.tempRef=e,o.vcRef=n,o.getInjected=r.get.bind(r),o}return m(e,t),e.prototype.ngOnChanges=function(){this.vcRef.clear(),this.vcRef.createEmbeddedView(this.tempRef,{$implicit:this.data,index:0})},e.prototype.ngOnDestroy=function(){this.vcRef.clear()},e}(C),f([e.Input("abpPropDataFromList"),g("design:type",Object)],t.PropDataDirective.prototype,"propList",void 0),f([e.Input("abpPropDataWithRecord"),g("design:type",Object)],t.PropDataDirective.prototype,"record",void 0),f([e.Input("abpPropDataAtIndex"),g("design:type",Number)],t.PropDataDirective.prototype,"index",void 0),t.PropDataDirective=f([e.Directive({exportAs:"abpPropData",selector:"[abpPropData]"}),g("design:paramtypes",[e.TemplateRef,e.ViewContainerRef,e.Injector])],t.PropDataDirective);var rt=Object.freeze({__proto__:null});function ot(t){return function(e){return c.of(e.record.extraProperties[t])}}function it(t,e){return c.merge(c.of(null),t.languageChange).pipe(p.map((function(){return e})))}function at(t,e,n){var r=n.localizationResource,o=function(t){return t.split(".").pop()}(e);return function(e){return t.localizeWithFallbackSync([r],["Enum:"+o+"."+e,o+"."+e,e],e)}}t.UiExtensionsModule=function(){},t.UiExtensionsModule=f([e.NgModule({exports:[t.DateTimePickerComponent,t.PageToolbarComponent,t.GridActionsComponent,t.ExtensibleFormComponent,t.ExtensibleTableComponent,t.PropDataDirective,t.DisabledDirective],declarations:[t.DateTimePickerComponent,t.PageToolbarComponent,t.GridActionsComponent,t.ExtensibleFormPropComponent,t.ExtensibleFormComponent,t.ExtensibleTableComponent,t.PropDataDirective,t.DisabledDirective],imports:[a.CoreModule,s.ThemeSharedModule,l.NgxValidateCoreModule,r.NgbDatepickerModule,r.NgbDropdownModule,r.NgbTimepickerModule]})],t.UiExtensionsModule);var ct=function(t){return t.ConfigState},pt=function(t){return t.objectExtensions},st=u.createSelector([ct],pt),lt=function(t){return t.localization},ut=u.createSelector([ct],lt),dt=function(t){return Object.keys(t.enums).reduce((function(e,n){var r,o,i=t.enums[n],a=i.fields,c=i.localizationResource;return e[n]={fields:a,localizationResource:c,transformed:(r=a,o={},r.forEach((function(t){var e=t.name,n=t.value;o[o[e]=n]=e})),o)},e}),{})},mt=u.createSelector([st,ut],dt),ft=function(t){return u.createSelector([st],(function(e){return e?(e.modules[t]||{}).entities:null}))},bt=ft;t.ActionList=O,t.CreateFormPropsFactory=I,t.EXTENSIONS_ACTION_CALLBACK=et,t.EXTENSIONS_ACTION_DATA=tt,t.EXTENSIONS_ACTION_TYPE=Z,t.EXTENSIONS_IDENTIFIER=Q,t.EXTRA_PROPERTIES_KEY=F,t.EditFormPropsFactory=P,t.EntityAction=W,t.EntityActionList=V,t.EntityActions=z,t.EntityActionsFactory=B,t.EntityProp=X,t.EntityPropList=G,t.EntityProps=q,t.EntityPropsFactory=$,t.FormProp=w,t.FormPropData=j,t.FormPropList=k,t.FormProps=E,t.ObjectExtensions=rt,t.PropList=v,t.ToolbarAction=U,t.ToolbarActionList=H,t.ToolbarActions=Y,t.ToolbarActionsFactory=K,t.ToolbarComponent=J,t.createExtraPropertyValueResolver=ot,t.generateFormFromProps=function(e){var n=e.getInjected(t.ExtensionsService),r=e.getInjected(Q),i=new o.FormGroup({}),a=new o.FormGroup({});i.addControl(F,a);var c=e.record||{},p=n[("{}"===JSON.stringify(c)?"create":"edit")+"FormProps"].get(r).props,s=c.extraProperties||{};return p.forEach((function(n){var r=n.value,p=r.name,l=r.isExtra||p in s,u=l?s[p]:p in c?c[p]:void 0;if(void 0===u&&(u=r.defaultValue),u){var d=void 0;switch(r.type){case"date":u=(d=new t.DateAdapter).toModel(d.fromModel(u));break;case"time":u=(d=new t.TimeAdapter).toModel(d.fromModel(u));break;case"dateTime":u=(d=new t.DateTimeAdapter).toModel(d.fromModel(u))}}var m=new o.FormControl(u,{asyncValidators:r.asyncValidators(e),validators:r.validators(e)});(l?a:i).addControl(p,m)})),i},t.getObjectExtensionEntitiesFromStore=function(t,e){return t.select(ft(e)).pipe(p.map((function(t){return void 0===t?{}:t})),p.filter(Boolean),p.take(1))},t.mapEntitiesToContributors=function(t,e){return c.pipe(p.switchMap((function(n){return c.zip(t.select(ut),t.select(mt)).pipe(p.map((function(t){var r=h(t,2),o=r[0],i=r[1],c=function(t){var e=a.createLocalizationPipeKeyGenerator(t);return function(t,n){return t&&t.name?e([t.resource],[t.name],t.name):e([n.resource],["DisplayName:"+n.name],void 0)||e([n.resource],[n.name],n.name)}}(o);return Object.keys(n).reduce((function(t,r){t.prop[r]=[],t.createForm[r]=[],t.editForm[r]=[];var o=n[r];if(!o)return t;var p=o.properties;return p?function(t,e,n){return function(r,o,i){var c=!0;return Object.keys(r).forEach((function(p){var s,l,u,d=r[p],m=function(t){return t.typeSimple.replace(/\?$/,"")}(d),f=t(d.displayName,{name:p,resource:e});if(d.ui.onTable.isVisible){var b=Boolean(d.ui.onTable.isSortable),g="boolean"===m?150:250,h="enum"===m?(s=d.type,l=n[d.type],u=p,function(t){var e=t.record.extraProperties[u],n=l.transformed[e],r=t.getInjected(a.LocalizationService);return it(r,at(r,s,l)(n))}):ot(p),y=new X({type:m,name:p,displayName:f,sortable:b,columnWidth:g,valueResolver:h,isExtra:c}),v=function(t){return t.addTail(y)};o.prop[i].push(v)}var C=d.ui.onCreateForm.isVisible,x=d.ui.onEditForm.isVisible;if(C||x){var D=d.defaultValue,T=function(){return function(t){var e=[];return t.attributes.forEach((function(t){t.typeSimple in a.AbpValidators&&e.push(a.AbpValidators[t.typeSimple](t.config))})),e}(d)},k=void 0;"enum"===m&&(k=function(t,e){return function(n){var r=n.getInjected(a.LocalizationService),o=at(r,t,e);return it(r,e.fields.map((function(t){var e=t.name,n=t.value;return{key:o(e),value:n}})))}}(p,n[d.type]));var E=new w({type:m,name:p,displayName:f,options:k,defaultValue:D,validators:T,isExtra:c}),I=function(t){return t.addTail(E)};C&&o.createForm[i].push(I),x&&o.editForm[i].push(I)}})),o}}(c,e,i)(p,t,r):t}),{prop:{},createForm:{},editForm:{}})})))})),p.take(1))},t.mergeWithDefaultActions=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];Object.keys(e).forEach((function(r){var o=t.get(r);o.clearContributors(),o.addContributor((function(t){return t.addManyTail(e[r])})),n.forEach((function(t){return(t[r]||[]).forEach((function(t){return o.addContributor(t)}))}))}))},t.mergeWithDefaultProps=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];Object.keys(e).forEach((function(r){var o=t.get(r);o.clearContributors(),o.addContributor((function(t){return t.addManyTail(e[r])})),n.forEach((function(t){return(t[r]||[]).forEach((function(t){return o.addContributor(t)}))}))}))},t.ɵ0=N,t.ɵ1=pt,t.ɵ2=lt,t.ɵ3=dt,t.ɵ4=bt,t.ɵa=L,t.ɵb=_,t.ɵc=M,t.ɵd=R,t.ɵe=C,t.ɵf=x,t.ɵg=D,t.ɵh=T,t.ɵi=S,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=abp-ng.theme.shared-extensions.umd.min.js.map